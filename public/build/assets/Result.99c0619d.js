import{H as k,L as p,u as w,r as u,o as r,c as a,a as _,w as y,F as f,b as e,J as d,f as h,e as j,h as C,g,a3 as x,n as M}from"./app.8eaa9ff9.js";import{A}from"./UserLayout.90c0163b.js";import{u as L}from"./useConfirm.90c27dd5.js";import{_ as R}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as B}from"./PlayIcon.d2ab6b69.js";import"./index.43e02ee5.js";const{confirm:D}=L(),z={components:{Head:k,AppLayout:A,Link:p,PlayIcon:B},props:{errors:Object,auth:Object,category_share:Object,products:Object,token:String,show_review:Boolean,rank:Object},data(){return{isCheckAll:!1,showRankDialog:!1}},mounted(){this.rank&&(this.showRankDialog=!0,console.log(this.rank))},setup(t){let i={},o;for(o=0;o<t.products.data.length;o++)i["id"+t.products.data[o].id]=!1;return{form:w({checks:i,token:t.token})}},methods:{closeRankDialog(){this.showRankDialog=!1},format_number(t){return String(t).replace(/(.)(?=(\d{3})+$)/g,"$1,")},submit(){let t,i=0;var o=0;for(t=0;t<this.products.data.length;t++)this.form.checks["id"+this.products.data[t].id]&&(i++,o=o+parseInt(this.products.data[t].point));let n="";o>0?n="\u9078\u629E\u3057\u305F"+i+"\u70B9\u306E\u5546\u54C1\u3092"+o+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002":n="\u5168\u3066\u306E\u5546\u54C1\u304C\u300C\u7372\u5F97\u6E08\u307F\u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3057\u307E\u3059\u3002",D(n).then(c=>{c&&this.form.post(route("user.gacha.result.exchange"),{onFinish:()=>{}})})},checkall(){let t;for(t=0;t<this.products.data.length;t++)this.form.checks["id"+this.products.data[t].id]=this.isCheckAll},checkone(){this.isCheckAll=this.products.data.length>0,this.products.data.forEach(t=>{this.form.checks["id"+t.id]!=!0&&(this.isCheckAll=!1)})}}},V={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},I={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},O=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity animate-[fadeIn_0.3s_ease-out]","aria-hidden":"true"},null,-1),P=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200B",-1),S={class:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full animate-[bounceIn_0.6s_cubic-bezier(0.68,-0.55,0.265,1.55)]"},F={class:"bg-gradient-to-br from-rose-50 to-white px-6 pt-8 pb-6 sm:p-8"},H={class:"text-center"},N=e("div",{class:"mb-6"},[e("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-rose-500 to-rose-600 mb-4"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})])]),e("h3",{class:"text-2xl font-bold text-gray-900 mb-2"}," \u4F1A\u54E1\u30E9\u30F3\u30AF\u30A2\u30C3\u30D7\uFF01 "),e("p",{class:"text-gray-600"},"\u304A\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307E\u3059\uFF01\u65B0\u3057\u3044\u7279\u5178\u304C\u89E3\u653E\u3055\u308C\u307E\u3057\u305F")],-1),T={class:"mb-6 bg-white rounded-xl p-4 shadow-sm"},U=["src"],E={class:"text-lg font-bold text-gray-900 mb-2"},q={class:"bg-white rounded-xl p-6 shadow-sm mb-6"},J=e("h4",{class:"text-lg font-bold text-gray-900 mb-4"},"\u65B0\u3057\u304F\u53D7\u3051\u3089\u308C\u308B\u7279\u5178",-1),G={class:"space-y-3"},K={class:"flex items-center gap-3"},Q=e("div",{class:"w-8 h-8 rounded-full bg-rose-100 flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),W={class:"flex-1"},X=e("div",{class:"text-sm text-gray-600"},"\u30E9\u30F3\u30AF\u30A2\u30C3\u30D7\u30DC\u30FC\u30CA\u30B9",-1),Y={class:"font-bold text-rose-600"},Z={class:"flex items-center gap-3"},$=e("div",{class:"w-8 h-8 rounded-full bg-rose-100 flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1),ee={class:"flex-1"},te=e("div",{class:"text-sm text-gray-600"},"PT\u4ED8\u4E0E\u7387",-1),se={class:"font-bold text-gray-900"},oe={class:"flex items-center gap-3"},ie=e("div",{class:"w-8 h-8 rounded-full bg-rose-100 flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),ne={class:"flex-1"},re=e("div",{class:"text-sm text-gray-600"},"RP\u4ED8\u4E0E\u7387",-1),ae={class:"font-bold text-gray-900"},le={class:"bg-white px-6 py-4 sm:px-8 border-t border-gray-100"},de={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 h-full flex flex-col justify-center"},ce=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900 text-center"},"\u30AC\u30C1\u30E3 \u2013 \u7D50\u679C")],-1),he=["href"],me=e("div",{class:"bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 rounded-xl p-4 text-center text-white shadow-sm transition-all duration-200"},[e("div",{class:"flex items-center justify-center gap-3"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-lg font-medium"},"\u30AC\u30C1\u30E3\u6F14\u51FA\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B")])],-1),ue=[me],_e={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-6"},fe={class:"relative"},ge=["for"],xe={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-200 hover:shadow-md p-4 space-y-2"},be={class:"relative"},ve=["src"],ke=["src","alt"],pe={class:"text-center"},we={class:"font-medium text-gray-900 mb-1 line-clamp-2"},ye={class:"text-sm text-gray-500 mb-2"},je={key:0,class:"bg-orange-500/90 py-1 text-sm flex items-center justify-center hover:text-transparent text-white hover:bg-transparent transition-all duration-200"},Ce=e("span",{class:"font-medium"},"\u767A\u9001\u4F9D\u983C\u6E08\u307F",-1),Me=[Ce],Ae={key:1,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-rose-100 text-rose-700"},Le={key:0,class:"absolute top-2 right-2"},Re=["id","onUpdate:modelValue"],Be={class:"sticky bottom-16 md:bottom-20 -mx-4 md:-mx-6 bg-white border-t border-gray-100 p-4"},De={class:"max-w-3xl mx-auto"},ze={class:"flex items-center justify-around gap-4 flex-col md:flex-row"},Ve={class:"flex items-center gap-2 cursor-pointer"},Ie=e("span",{class:"text-sm font-medium text-gray-700"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),Oe=["disabled"],Pe=e("p",{class:"text-center text-sm text-gray-500 mt-2"}," \u203B\u9078\u629E\u3055\u308C\u306A\u304B\u3063\u305F\u5546\u54C1\u306F\u300C\u7372\u5F97\u6E08\u307F \u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3055\u308C\u307E\u3059\u3002 ",-1);function Se(t,i,o,n,c,l){const b=u("Head"),v=u("AppLayout");return r(),a(f,null,[_(b,{title:"\u30AC\u30C1\u30E3\u2013\u7D50\u679C"}),_(v,{is_home:!0},{default:y(()=>[c.showRankDialog?(r(),a("div",V,[e("div",I,[O,P,e("div",S,[e("div",F,[e("div",H,[N,e("div",T,[e("img",{src:o.rank.badge,alt:"Rank Image",class:"mx-auto h-32 mb-4"},null,8,U),e("div",E,d(o.rank.title),1)]),e("div",q,[J,e("div",G,[e("div",K,[Q,e("div",W,[X,e("div",Y,d(o.rank.bonus.toLocaleString())+"PT",1)])]),e("div",Z,[$,e("div",ee,[te,e("div",se,d(o.rank.pt_rate)+"%",1)])]),e("div",oe,[ie,e("div",ne,[re,e("div",ae,d(o.rank.dp_rate)+"%",1)])])])])])]),e("div",le,[e("button",{type:"button",onClick:i[0]||(i[0]=(...s)=>l.closeRankDialog&&l.closeRankDialog(...s)),class:"w-full inline-flex justify-center items-center px-6 py-3 rounded-xl text-base font-medium text-white bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-all duration-200"}," \u7279\u5178\u3092\u78BA\u8A8D\u3059\u308B ")])])])])):h("",!0),e("div",de,[ce,o.show_review?(r(),a("a",{key:0,class:"block w-full mb-6",href:t.route("user.gacha.video",{token:o.token})},ue,8,he)):h("",!0),e("form",{onSubmit:i[4]||(i[4]=j(s=>l.submit(),["prevent"])),class:"flex-1 relative"},[e("div",_e,[(r(!0),a(f,null,C(o.products.data,(s,Fe)=>(r(),a("div",fe,[e("label",{for:"checkbox"+s.id,class:"block cursor-pointer"},[e("div",xe,[e("div",be,[e("img",{class:"w-full aspect-square object-contain",src:s.image},null,8,ve),s.badge?(r(),a("img",{key:0,src:s.badge,class:"absolute bottom-2 right-2 w-1/4",alt:s.badge},null,8,ke)):h("",!0)]),e("div",pe,[e("div",we,d(s.name),1),e("div",ye,d(s.rare),1),s.status==3?(r(),a("div",je,Me)):(r(),a("div",Ae,d(l.format_number(s.point))+" PT ",1))])]),s.status==1?(r(),a("div",Le,[g(e("input",{id:"checkbox"+s.id,type:"checkbox","onUpdate:modelValue":m=>n.form.checks["id"+s.id]=m,onChange:i[1]||(i[1]=(...m)=>l.checkone&&l.checkone(...m)),class:"h-5 w-5 rounded border-gray-300 text-rose-500 focus:ring-rose-500"},null,40,Re),[[x,n.form.checks["id"+s.id]]])])):h("",!0)],8,ge)]))),256))]),e("div",Be,[e("div",De,[e("div",ze,[e("label",Ve,[g(e("input",{type:"checkbox","onUpdate:modelValue":i[2]||(i[2]=s=>c.isCheckAll=s),onChange:i[3]||(i[3]=s=>l.checkall()),class:"h-5 w-5 rounded border-gray-300 text-rose-500 focus:ring-rose-500"},null,544),[[x,c.isCheckAll]]),Ie]),e("button",{type:"submit",class:M([{"opacity-50":n.form.processing},"inline-flex items-center px-6 py-2 rounded-xl text-sm font-medium text-white bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-all duration-200"]),disabled:n.form.processing}," \u9078\u629E\u3057\u305F\u5546\u54C1\u3092\u30DD\u30A4\u30F3\u30C8\u306B\u5909\u63DB ",10,Oe)]),Pe])])],32)])]),_:1})],64)}const Je=R(z,[["render",Se]]);export{Je as default};
