import{H as j,L as C,u as L,r as m,o as r,c,a as f,w as p,F as g,b as e,g as _,N as A,f as x,e as P,h as B,n as b,t as d,l as u,a3 as k}from"./app.4da2b71e.js";import{A as S}from"./Admin.ff0b9172.js";import{u as V}from"./useConfirm.9b4258e2.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as T}from"./PlayIcon.66d89a05.js";const{confirm:M}=V(),O={components:{Head:j,AppLayout:S,Link:C,PlayIcon:T},props:{errors:Object,auth:Object,category_share:Object,products:Object,token:String,show_review:Boolean,rank:Object,gacha_id:Number,delivery_limit:Number},data(){return{isCheckAll:!1,showRankDialog:!1,sortBy:"id"}},computed:{sortedProducts(){const t=[...this.products];switch(this.sortBy){case"id":return t.sort((s,i)=>s.id-i.id);case"point_up":return t.sort((s,i)=>s.point-i.point);case"point_down":return t.sort((s,i)=>i.point-s.point);default:return t}},selectedProductsCount(){return this.products.reduce((t,s)=>this.form.checks["id"+s.id]?t+1:t,0)},selectedTotalPoint(){return this.products.reduce((t,s)=>this.form.checks["id"+s.id]?t+parseInt(s.point):t,0)}},mounted(){this.rank&&(this.showRankDialog=!0)},setup(t){let s={},i;for(i=0;i<t.products.length;i++)s["id"+t.products[i].id]=!1;return{form:L({checks:s,token:t.token})}},methods:{submit(){let t,s=0;var i=0;for(t=0;t<this.products.length;t++)this.form.checks["id"+this.products[t].id]&&(s++,i=i+parseInt(this.products[t].point));let n="";i>0?n="\u9078\u629E\u3057\u305F"+s+"\u70B9\u306E\u5546\u54C1\u3092"+i.toLocaleString()+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002":n="\u5168\u3066\u306E\u5546\u54C1\u304C\u300C\u7372\u5F97\u6E08\u307F\u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3057\u307E\u3059\u3002",M(n).then(a=>{a&&this.form.post(route("user.gacha.result.exchange"),{onFinish:()=>{}})})},checkall(){let t;for(t=0;t<this.products.length;t++)this.form.checks["id"+this.products[t].id]=this.isCheckAll},checkone(){this.isCheckAll=this.products.length>0,this.products.forEach(t=>{this.form.checks["id"+t.id]!=!0&&(this.isCheckAll=!1)})}}},z={class:"px-4 sm:px-6 h-full flex flex-col justify-center"},D={class:"py-2 bg-white sticky top-[80px] z-[1]"},F={class:"flex items-center justify-between"},H=e("h1",{class:"text-lg md:text-xl font-bold text-slate-900 text-center"},"\u30AC\u30C1\u30E3 \u2013 \u7D50\u679C",-1),R=e("option",{value:"id"},"\u6392\u51FA\u9806",-1),U=e("option",{value:"point_up"},"PT\u5B89\u3044\u9806",-1),I=e("option",{value:"point_down"},"PT\u9AD8\u3044\u9806",-1),E=[R,U,I],q=["href"],G=e("div",{class:"bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 rounded-xl p-4 text-center text-white shadow-sm transition-all duration-200"},[e("div",{class:"flex items-center justify-center gap-3"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-lg font-medium"},"\u30AC\u30C1\u30E3\u6F14\u51FA\u3092\u3082\u3046\u4E00\u5EA6\u898B\u308B")])],-1),J=[G],K={class:"flex flex-wrap justify-center gap-4 mb-6"},Q={class:"w-[calc(50%-0.5rem)] sm:w-[calc(33%-0.66rem)] md:w-[calc(25%-1rem)] relative"},W=["for"],X={class:"relative"},Y=["src"],Z=["src","alt"],$={class:"text-center"},ee={class:"font-medium text-slate-900 mb-1 line-clamp-2 text-sm"},te={class:"text-xs text-slate-500 mb-2"},se={key:0,class:"bg-orange-500/90 py-1 text-xs flex items-center justify-center text-white transition-all duration-200"},oe=e("span",{class:"font-medium"},"\u767A\u9001\u4F9D\u983C\u6E08\u307F",-1),ie=[oe],ne={key:1,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-slate-600 text-white"},le=["src"],re={key:0,class:"absolute top-0 right-2"},ce=["id","onUpdate:modelValue"],ae={class:"sticky bottom-0 -mx-4 md:-mx-6 bg-white border-t border-slate-200 p-2"},de={class:"w-full py-2 space-y-4"},ue={class:"flex items-center justify-between px-2"},he={class:"text-center text-sm md:text-base text-slate-700 font-medium"},me={class:"flex items-center gap-2 cursor-pointer justify-center"},fe=e("span",{class:"text-sm font-medium text-slate-700"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),_e={class:"flex items-center justify-center gap-4 px-1"},xe={class:"flex gap-3 w-full justify-center"},pe=["disabled"],ge={class:"text-center text-xs md:text-sm text-slate-500"},be=e("br",null,null,-1),ke=e("br",null,null,-1);function ve(t,s,i,n,a,l){const v=m("Head"),w=m("Link"),y=m("AppLayout");return r(),c(g,null,[f(v,{title:"\u30AC\u30C1\u30E3\u2013\u7D50\u679C"}),f(y,{is_home:!0},{default:p(()=>[e("div",z,[e("div",D,[e("div",F,[H,_(e("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>a.sortBy=o),class:"pl-4 pr-8 text-sm text-slate-600 border border-slate-400 rounded-lg focus:outline-none focus:ring-0"},E,512),[[A,a.sortBy]])])]),i.show_review?(r(),c("a",{key:0,class:"block w-full max-w-md mx-auto mb-6",href:t.route("user.gacha.video",{token:i.token})},J,8,q)):x("",!0),e("form",{onSubmit:s[2]||(s[2]=P(o=>l.submit(),["prevent"])),class:"flex-1"},[e("div",K,[(r(!0),c(g,null,B(l.sortedProducts,(o,we)=>(r(),c("div",Q,[e("label",{for:"checkbox"+o.id,class:"block cursor-pointer h-full"},[e("div",{class:b(["bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden transition-all duration-200 hover:shadow-md p-3 space-y-2 h-full",{"bg-slate-100":n.form.checks["id"+o.id]}])},[e("div",X,[e("img",{class:"w-full object-contain",src:o.image},null,8,Y),o.badge?(r(),c("img",{key:0,src:o.badge,class:"absolute bottom-2 w-[calc(100%-2rem)] left-4",alt:o.badge},null,8,Z)):x("",!0)]),e("div",$,[e("div",ee,d(o.name),1),e("div",te,d(o.rare),1),o.status==3?(r(),c("div",se,ie)):(r(),c("div",ne,[e("img",{src:"/images/icon_cash.png?v=4",class:"w-4 h-4 mr-1"},null,8,le),u(" "+d(o.point.toLocaleString())+" PT ",1)]))])],2),o.status==1?(r(),c("div",re,[_(e("input",{id:"checkbox"+o.id,type:"checkbox","onUpdate:modelValue":h=>n.form.checks["id"+o.id]=h,onChange:s[1]||(s[1]=(...h)=>l.checkone&&l.checkone(...h)),class:"h-4 w-4 rounded border-slate-300 text-slate-600 focus:ring-0"},null,40,ce),[[k,n.form.checks["id"+o.id]]])])):x("",!0)],8,W)]))),256))])],32),e("div",ae,[e("div",de,[e("div",ue,[e("div",he,d(l.selectedProductsCount)+"\u70B9\uFF0F"+d(l.selectedTotalPoint.toLocaleString())+"PT ",1),e("label",me,[_(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=o=>a.isCheckAll=o),onChange:s[4]||(s[4]=o=>l.checkall()),class:"h-4 w-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"},null,544),[[k,a.isCheckAll]]),fe])]),e("div",_e,[e("div",xe,[e("button",{type:"button",onClick:s[5]||(s[5]=o=>l.submit()),class:b([{"opacity-50":n.form.processing},"flex-1 inline-flex items-center justify-center max-w-48 py-2 rounded-lg text-sm font-medium text-neutral-700 bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-all duration-200"]),disabled:n.form.processing}," \u30DD\u30A4\u30F3\u30C8\u306B\u5909\u63DB ",10,pe),f(w,{href:t.route("user.gacha",{id:i.gacha_id}),class:"flex-1 inline-flex items-center justify-center max-w-48 py-2 rounded-lg text-sm font-medium text-white bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200"},{default:p(()=>[u(" \u30AC\u30C1\u30E3\u306B\u623B\u308B ")]),_:1},8,["href"])])]),e("p",ge,[u(" \u203B\u9078\u629E\u3055\u308C\u306A\u304B\u3063\u305F\u5546\u54C1\u306F\u300C\u7372\u5F97\u6E08\u307F \u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3055\u308C\u307E\u3059\u3002"),be,u(" \u300C\u7372\u5F97\u6E08\u307F \u5546\u54C1\u4E00\u89A7\u300D\u304B\u3089\u767A\u9001\u4F9D\u983C\u304C\u3067\u304D\u307E\u3059\u3002"),ke,u(" \u767A\u9001\u4F9D\u983C\u306B\u306F\u5408\u8A08"+d(i.delivery_limit.toLocaleString())+"pt\u4EE5\u4E0A\u306E\u9078\u629E\u304C\u5FC5\u8981\u3067\u3059\u3002 ",1)])])])])]),_:1})],64)}const Pe=N(O,[["render",ve]]);export{Pe as default};
