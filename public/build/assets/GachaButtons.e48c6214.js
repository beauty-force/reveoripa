import{L as l,j as m,u as d,o as h,c,b as i,F as u,h as f,n as g,t as x,f as b}from"./app.f4e091c8.js";import{u as y}from"./useConfirm.020ab21c.js";import{_ as v}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as w}from"./PlayIcon.4829eb0c.js";const{confirm:C}=y(),B={components:{Link:l,PlayIcon:w},props:{gacha:Object},data(){return{category_share:m().props.value.category_share,processing:!1,gachaButtons:[]}},methods:{format_number(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1,")},clickgacha(e){let a=Math.min(this.gacha.count_rest,e.number),s=e.point;C(`\u30AC\u30C1\u30E3\u3092\u5F15\u304D\u307E\u3059\u304B\uFF1F
`+a+"\u56DE\u5206\u306E\u30DD\u30A4\u30F3\u30C8\u3092"+s.toLocaleString()+"PT\u6D88\u8CBB\u3057\u307E\u3059\u3002").then(n=>{n&&this.start_gacha(e.number)})},start_gacha(e){this.processing=!0,!this.url_edit&&d({id:this.gacha.id,number:e,code:this.gacha.code}).post(route("user.gacha.start_post"),{onFinish:()=>{this.processing=!1}})},generateGachaButtons(){if(!this.gacha.buttons){this.gachaButtons=[{number:1,text:"1\u56DE",point:this.gacha.point,classes:"bg-gradient-to-br from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-800 shadow-[0_2px_12px_rgba(0,0,0,0.1)] hover:shadow-[0_6px_16px_rgba(0,0,0,0.15)]",textClass:"text-gray-600",subTextClass:"text-gray-600",pointTextClass:"text-gray-700"},{number:10,text:"10\u9023",point:10*this.gacha.point,classes:"bg-gradient-to-br from-orange-200 to-orange-400 hover:from-orange-300 hover:to-orange-400 text-gray-700 shadow-[0_4px_12px_rgba(249,115,22,0.3)] hover:shadow-[0_6px_16px_rgba(249,115,22,0.4)]",textClass:"text-gray-700",subTextClass:"text-gray-700",pointTextClass:"text-gray-700"},{number:100,text:"100\u9023",point:100*this.gacha.point,classes:"bg-gradient-to-br from-rose-500 to-rose-700 hover:from-rose-600 hover:to-rose-800 text-white shadow-[0_4px_12px_rgba(220,38,38,0.3)] hover:shadow-[0_6px_16px_rgba(220,38,38,0.4)]",textClass:"bg-gradient-to-r from-white to-rose-100 bg-clip-text text-transparent",subTextClass:"text-rose-100",pointTextClass:"text-rose-50"}];return}const e=this.gacha.buttons.split(",").map(a=>parseInt(a.trim()));this.gachaButtons=e.map((a,s)=>{let n,o,r,t,p,_;return this.gacha.count_rest<=a?(n="\u5168\u3066",o=this.gacha.count_rest*this.gacha.point):(n=a+(a===1?"\u56DE":"\u9023"),o=a*this.gacha.point),s===0?(r="bg-gradient-to-br from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-800 shadow-[0_2px_12px_rgba(0,0,0,0.1)] hover:shadow-[0_6px_16px_rgba(0,0,0,0.15)]",t="text-gray-600"):s===1?(r="bg-gradient-to-br from-orange-200 to-orange-400 hover:from-orange-300 hover:to-orange-400 text-gray-700 shadow-[0_4px_12px_rgba(249,115,22,0.3)] hover:shadow-[0_6px_16px_rgba(249,115,22,0.4)]",t="text-gray-700"):s===2?(r="bg-gradient-to-br from-rose-500 to-rose-700 hover:from-rose-600 hover:to-rose-800 text-white shadow-[0_4px_12px_rgba(220,38,38,0.3)] hover:shadow-[0_6px_16px_rgba(220,38,38,0.4)]",t="bg-gradient-to-r from-white to-rose-100 bg-clip-text text-transparent"):(r="bg-gradient-to-br from-gray-500 to-gray-700 hover:from-gray-600 hover:to-gray-800 text-gray-800 shadow-[0_2px_12px_rgba(0,0,0,0.1)] hover:shadow-[0_6px_16px_rgba(0,0,0,0.15)]",t="text-white"),{number:a,text:n,point:o,classes:r,textClass:t,subTextClass:p,pointTextClass:_}})}},mounted(){this.generateGachaButtons(),this.url_edit||(this.url_card=route("user.gacha",this.gacha.id)+this.category_share.cat_route_appendix)}},k={key:0,class:"w-full mx-auto flex flex-col justify-center py-1 px-1 gap-3 md:max-w-md"},T={class:"flex font-[mplus2] gap-3 flex-wrap"},G=["onClick","disabled"],j=i("img",{src:"/images/icon_cash.png?v=4",class:"ml-2 h-4 mr-1"},null,-1);function F(e,a,s,n,o,r){return s.gacha.count_rest>0?(h(),c("div",k,[i("div",T,[(h(!0),c(u,null,f(o.gachaButtons,t=>(h(),c("button",{key:t.number,onClick:p=>r.clickgacha(t),class:g([[{"opacity-50":o.processing},t.classes],"cursor-pointer rounded-2xl flex-1 text-center space-y-1 pt-2 pb-2.5 border-2 transition-all duration-300 hover:-translate-y-0.5"]),disabled:o.processing},[i("div",{class:g(["text-nowrap flex items-center justify-center",t.number>10?"min-w-48":"min-w-36"])},[i("span",{class:g(["font-extrabold text-[16px]",t.textClass])},x(t.text),3),i("span",{class:g(["font-semibold text-[12px]",t.textClass])},"\u30AC\u30C1\u30E3",2),j,i("span",{class:g(["font-semibold text-[14px]",t.textClass])},x(r.format_number(t.point)),3)],2)],10,G))),128))])])):b("",!0)}const I=v(B,[["render",F]]);export{I as G};
