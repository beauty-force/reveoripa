import{H as j,L as I,r as m,o as e,c as s,a as h,w as g,F as d,b as t,f as i,h as f,t as u,n as M,_ as B,K as S,M as D}from"./app.ebf36d57.js";import{A}from"./Admin.6b810625.js";import{F as T,f as G,o as L,N,V as O,r as V}from"./useConfirm.bc830b17.js";import{G as z}from"./GachaButtons.39643f10.js";import{P as F}from"./Pagination.5b6bd025.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as P}from"./ExclamationTriangleIcon.deb2cba6.js";import"./PlayIcon.465a6ffa.js";import"./ChevronRightIcon.c3d3e7a3.js";import"./EllipsisHorizontalIcon.2e35cdbd.js";const R={components:{Head:j,AppLayout:A,Footer:T,Link:I,GachaButtons:z,Pagination:F,TransitionRoot:G,TransitionChild:L,Dialog:N,DialogOverlay:O,XMarkIcon:V,ExclamationTriangleIcon:P},props:{errors:Object,gacha:Object,category_share:Object,gacha_log:Array,is_admin:Boolean,search_cond:Object,total:Number,code:String},data(){return{products:[this.gacha.products.filter(a=>a.rank==1),this.gacha.products.filter(a=>a.rank==2),this.gacha.products.filter(a=>a.rank==3),this.gacha.products.filter(a=>a.rank==4)],last_product:this.gacha.products.filter(a=>a.is_last==1),isDialogMessage:!1,dialogMessage:"",image:""}},methods:{format_number(a){return String(a).replace(/(.)(?=(\d{3})+$)/g,"$1,")},openImage(a){this.image=a,this.isDialogMessage=!0}},computed:{progress_width(){return this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card)+"%":"100%"},progress_color(){let a=this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card):100;return a>=50?"bg-green-500":a>=20?"bg-yellow-500":"bg-rose-500"}}},l=a=>(S("data-v-87f68c92"),a=a(),D(),a),E={key:0,class:"w-full min-h-full flex flex-col"},K={class:"md:w-[680px] w-full mx-auto bg-white flex-1"},X={class:"mx-auto relative"},q=["src"],J=["src"],Q={class:"flex justify-center items-center flex-col w-full mx-auto px-2 font-[mplus2] py-6"},U={key:0,class:"relative"},W=l(()=>t("span",{class:"text-2xl font-bold stroke-text"},"( S\u8CDE )",-1)),Y=l(()=>t("span",{class:"absolute top-0 left-0 text-2xl font-bold rainbow-text"},"( S\u8CDE )",-1)),Z=[W,Y],$={key:1,class:"flex flex-wrap justify-center w-full my-4"},tt=["onClick"],et=["src"],st={key:2,class:"relative"},ot=l(()=>t("span",{class:"text-2xl font-bold stroke-text"},"( A\u8CDE )",-1)),at=l(()=>t("span",{class:"absolute top-0 left-0 text-2xl font-bold text-amber-400"},"( A\u8CDE )",-1)),lt=[ot,at],nt={key:3,class:"flex flex-wrap justify-center w-full my-4"},ct=["onClick"],it=["src"],rt={key:4,class:"relative"},_t=l(()=>t("span",{class:"text-xl font-bold text-slate-400 stroke-text"},"( B\u8CDE )",-1)),dt=l(()=>t("span",{class:"absolute top-0 left-0 text-xl font-bold text-slate-400"},"( B\u8CDE )",-1)),ut=[_t,dt],ht={key:5,class:"flex flex-wrap justify-center w-full my-4"},mt=["onClick"],ft=["src"],pt={key:6,class:"relative"},xt=l(()=>t("span",{class:"text-xl font-bold text-amber-600 stroke-text"},"( C\u8CDE )",-1)),gt=l(()=>t("span",{class:"absolute top-0 left-0 text-xl font-bold text-amber-600"},"( C\u8CDE )",-1)),yt=[xt,gt],bt={key:7,class:"flex flex-wrap justify-center w-full my-4"},wt=["onClick"],vt=["src"],kt=["src","alt"],Ct={key:1,src:"/images/shipping_only.png",class:"absolute bottom-1.5 left-1.5 w-11 md:w-12"},jt={key:8,class:"text-xl font-bold text-purple-500 stroke-text"},It={key:9,class:"flex flex-wrap justify-center w-full my-4"},Mt=["onClick"],Bt=["src"],St=l(()=>t("span",{class:"mt-8 mb-4 text-xl font-bold"},"\u305D\u306E\u4ED6",-1)),Dt=l(()=>t("span",{class:"mb-4"},"\u30FB\u305D\u306E\u4ED6\u30AB\u30FC\u30C9\u3042\u308A",-1)),At={class:"sticky bottom-0 bg-white backdrop-blur-sm"},Tt={class:"w-full md:max-w-md mx-auto flex flex-col justify-center flex-1 max-h-20"},Gt={class:"font-[mplus2]"},Lt={class:"flex justify-between items-end py-1.5 w-full"},Nt={class:"flex items-end gap-1.5 w-[45%] px-3"},Ot=l(()=>t("img",{src:"/images/icon_cash.png",class:"h-5 mb-1"},null,-1)),Vt={class:"text-base md:text-xl font-bold"},zt=l(()=>t("span",{class:"text-xs pb-0.5 text-nowrap"},"/1\u56DE",-1)),Ft={class:"flex-1 flex flex-col items-end gap-1.5 pr-2"},Ht={key:0,class:"text-xs pr-1"},Pt={key:1,class:"flex items-center"},Rt=l(()=>t("span",{class:"font-semibold pr-2"},"- / -",-1)),Et=[Rt],Kt={class:"w-full px-2 pb-1"},Xt={class:"w-full h-2 rounded-full overflow-hidden flex bg-neutral-300/50"},qt={class:"px-1 py-1 flex items-end"},Jt={key:1,class:"w-full"},Qt={class:"flex flex-wrap justify-between items-center px-4 py-3 sticky top-[79px] bg-white"},Ut=l(()=>t("h3",{class:"underline underline-offset-4 text-lg"},"\u6392\u51FA\u5C65\u6B74",-1)),Wt={class:"overflow-auto px-1"},Yt={class:"min-w-full"},Zt={class:"border-b border-collapse text-nowrap"},$t=l(()=>t("th",{class:"text-center py-2 px-2"},"\u756A\u53F7",-1)),te=l(()=>t("th",{class:"text-center py-2 px-2"},"\u540D\u524D",-1)),ee=l(()=>t("th",{class:"text-center py-2 px-2"},"\u753B\u50CF",-1)),se=l(()=>t("th",{class:"text-center py-2 px-2"},"\u30EC\u30A2\u5EA6",-1)),oe=l(()=>t("th",{class:"text-center py-2 px-2"},"\u30DD\u30A4\u30F3\u30C8",-1)),ae=l(()=>t("th",{class:"text-center py-2 px-2"},"\u30E6\u30FC\u30B6\u30FC",-1)),le=l(()=>t("th",{class:"text-center py-2 px-2"},"\u6642\u9593",-1)),ne={class:"border-b border-collapse text-sm"},ce={class:"text-center py-2 px-2"},ie={class:"text-center py-2 px-2"},re={class:"text-center py-1 px-2 flex justify-center min-w-20 items-center"},_e=["src"],de={class:"text-center py-2 px-2"},ue={class:"text-center py-2 px-2"},he={class:"text-center py-2 px-2"},me={class:"text-center py-2 px-2"},fe=["src"];function pe(a,p,c,xe,n,r){const b=m("Head"),w=m("GachaButtons"),v=m("Pagination"),y=m("TransitionChild"),k=m("TransitionRoot"),C=m("AppLayout");return e(),s(d,null,[h(b,{title:"\u30AC\u30C1\u30E3"}),h(C,null,{default:g(()=>[c.gacha_log.length==0?(e(),s("div",E,[t("div",K,[t("div",X,[c.gacha.image!=""?(e(),s("img",{key:0,src:c.gacha.image,class:"block w-full"},null,8,q)):i("",!0),c.gacha.image==""?(e(),s("img",{key:1,src:c.gacha.thumbnail,class:"block w-full md:w-4/5 mx-auto"},null,8,J)):i("",!0),t("div",Q,[n.products[0].length>0?(e(),s("div",U,Z)):i("",!0),n.products[0].length>0?(e(),s("div",$,[(e(!0),s(d,null,f(n.products[0],(o,_)=>(e(),s("button",{key:_,onClick:x=>r.openImage(o.image),class:"w-1/2 md:w-1/3 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,et)],8,tt))),128))])):i("",!0),n.products[1].length>0?(e(),s("div",st,lt)):i("",!0),n.products[1].length>0?(e(),s("div",nt,[(e(!0),s(d,null,f(n.products[1],(o,_)=>(e(),s("button",{key:_,onClick:x=>r.openImage(o.image),class:"w-1/3 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,it)],8,ct))),128))])):i("",!0),n.products[2].length>0?(e(),s("div",rt,ut)):i("",!0),n.products[2].length>0?(e(),s("div",ht,[(e(!0),s(d,null,f(n.products[2],(o,_)=>(e(),s("button",{key:_,onClick:x=>r.openImage(o.image),class:"w-1/4 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,ft)],8,mt))),128))])):i("",!0),n.products[3].length>0?(e(),s("div",pt,yt)):i("",!0),n.products[3].length>0?(e(),s("div",bt,[(e(!0),s(d,null,f(n.products[3],(o,_)=>(e(),s("button",{key:_,onClick:x=>r.openImage(o.image),class:"w-1/4 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,vt),o.badge?(e(),s("img",{key:0,src:o.badge,class:"absolute top-2.5 right-2.5 w-10 md:w-11",alt:o.badge},null,8,kt)):i("",!0),o.lost_type=="1"?(e(),s("img",Ct)):i("",!0)],8,wt))),128))])):i("",!0),n.last_product.length>0?(e(),s("span",jt,"( \u30E9\u30B9\u30C8\u30EF\u30F3\u8CDE )")):i("",!0),n.last_product.length>0?(e(),s("div",It,[(e(!0),s(d,null,f(n.last_product,(o,_)=>(e(),s("button",{key:_,onClick:x=>r.openImage(o.image),class:"w-1/3 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,Bt)],8,Mt))),128))])):i("",!0),St,Dt])])]),t("div",At,[t("div",Tt,[t("div",Gt,[t("div",Lt,[t("div",Nt,[Ot,t("span",Vt,u(r.format_number(c.gacha.point)),1),zt]),t("div",Ft,[c.gacha.count_card>0?(e(),s("span",Ht," \u306E\u3053\u308A "+u(r.format_number(c.gacha.count_rest))+" / "+u(r.format_number(c.gacha.count_card)),1)):(e(),s("div",Pt,Et))])]),t("div",Kt,[t("div",Xt,[t("div",{class:M(`h-full rounded-full border-neutral-800 transition-all duration-500 ${r.progress_color}`),style:B({width:r.progress_width})},null,6)])])])]),t("div",qt,[h(w,{gacha:c.gacha},null,8,["gacha"])])])])):(e(),s("div",Jt,[t("div",Qt,[Ut,h(v,{search_cond:{...c.search_cond,id:c.gacha.id},route_name:"user.gacha",total:c.total},null,8,["search_cond","total"])]),t("div",Wt,[t("table",Yt,[t("thead",null,[t("tr",Zt,[$t,te,ee,se,c.is_admin?(e(),s(d,{key:0},[oe,ae,le],64)):i("",!0)])]),t("tbody",null,[(e(!0),s(d,null,f(c.gacha_log,(o,_)=>(e(),s("tr",ne,[t("td",ce,u(o.gacha_record_id),1),t("td",ie,u(o.name),1),t("td",re,[t("img",{class:"w-16",src:o.image},null,8,_e)]),t("td",de,u(o.rare),1),c.is_admin?(e(),s(d,{key:0},[t("td",ue,u(r.format_number(o.point)),1),t("td",he,u(o.email),1),t("td",me,u(o.gacha_time),1)],64)):i("",!0)]))),256))])])])])),h(k,{show:n.isDialogMessage,class:"h-full fixed inset-0 z-40 top-0"},{default:g(()=>[h(y,{enter:"transition ease-in-out duration-100 transform","enter-from":"scale-50","enter-to":"scale-100",leave:"transition ease-in-out duration-200 transform","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:g(()=>[t("div",{class:"relative z-20 w-full mx-auto md:w-[768px] h-screen flex items-center",onClick:p[0]||(p[0]=o=>n.isDialogMessage=!1)},[t("img",{src:n.image,class:"mx-auto max-h-[80%] max-w-[80%] w-full object-contain"},null,8,fe)])]),_:1}),h(y,{enter:"transition-opacity ease-linear duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-100","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:g(()=>[t("div",{class:"fixed inset-0 bg-white h-full",onClick:p[1]||(p[1]=o=>n.isDialogMessage=!1)})]),_:1})]),_:1},8,["show"])]),_:1})],64)}const Be=H(R,[["render",pe],["__scopeId","data-v-87f68c92"]]);export{Be as default};
