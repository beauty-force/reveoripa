import{H as B,L as E,u as V,r as _,o as d,c as a,a as u,w as x,F as f,b as t,h as k,n as p,g as b,a3 as w,t as r,f as h,a0 as O,l as m}from"./app.8a90d35d.js";import{A as T}from"./UserLayout.10a93fce.js";import{P as F}from"./ProductTabBar.c029b1a8.js";import{P as N}from"./PageHeader.f6cc817f.js";import{u as S}from"./useConfirm.87683cc1.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.9a304933.js";const{confirm:C,alert:v}=S(),U={components:{Head:B,AppLayout:T,Link:E,ProductTabBar:F,ProductHeader:N},props:{errors:Object,gacha:Object,category_share:Object,products:Object,profile:Object,delivery_limit:Number},data(){return{hasCheck:!1,main_tab:[{title:"\u672A\u9078\u629E",route_url:route("user.products"),is_active:!0},{title:"\u767A\u9001\u5F85\u3061",route_url:route("user.products.wait"),is_active:!1},{title:"\u767A\u9001\u6E08\u307F",route_url:route("user.products.delivered"),is_active:!1}],ready_delivery:0,products_count:0,isCheckAll:!1,isProductListExpanded:!1,_products:this.products.data.filter(o=>o.status==1)}},setup(o){return{form:V({checks:{}})}},methods:{format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},changeCheck(){let o,s=!1;for(this._products=this.products.data.filter(l=>l.status==1),this.isCheckAll=this._products.length>0,o=0;o<this._products.length;o++)this.form.checks["id"+this._products[o].id]?s=!0:this.isCheckAll=!1;this.hasCheck=s},submit(o){let s,l=0;var n=0;let i=0;for(s=0;s<this._products.length;s++)this.form.checks["id"+this._products[s].id]&&(l++,n=parseInt(n)+parseInt(this._products[s].point),this._products[s].rare=="\u30DD\u30A4\u30F3\u30C8"&&i++);if(o=="point")n>0&&C("\u4EA4\u63DB\u3057\u307E\u3059\u304B\uFF1F \u9078\u629E\u3057\u305F"+l+"\u70B9\u306E\u5546\u54C1\u3092"+this.format_number(n)+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002").then(c=>{c&&this.form.post(route("user.products.point.exchange"),{onFinish:()=>{this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}})});else{if(i>0){v("\u30DD\u30A4\u30F3\u30C8\u306F\u767A\u9001\u3067\u304D\u307E\u305B\u3093");return}if(l>0){if(n<this.delivery_limit){v("\u767A\u9001\u4F9D\u983C\u304C\u3067\u304D\u308B\u6700\u4F4E\u30DD\u30A4\u30F3\u30C8\u306F"+this.format_number(this.delivery_limit)+"pt\u3067\u3059\u3002");return}this.products_count=l,this.ready_delivery=1}}},back_delivery(){this.ready_delivery=0},submit_delivery(){this.profile.city&&this.profile.street?C(""+this.products_count+"\u70B9\u306E\u5546\u54C1\u3092\u914D\u9001\u3057\u307E\u3059\u304B\uFF1F").then(o=>{o&&this.form.post(route("user.delivery.post"),{onFinish:()=>{this.ready_delivery=2,this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}})}):v("\u5165\u529B\u30A8\u30E9\u30FC\u3001\u914D\u9001\u5148\u60C5\u5831\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002")},checkall(){let o;for(this.hasCheck=!1,o=0;o<this._products.length;o++)this.form.checks["id"+this._products[o].id]=this.isCheckAll,this.hasCheck=this.isCheckAll},toggleProductList(){this.isProductListExpanded=!this.isProductListExpanded}}},D={key:0,class:"p-3 md:p-4 w-full"},M={class:"grid md:grid-cols-2 gap-4 mt-6"},z={class:"bg-white rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition-all duration-200"},R=["id","onUpdate:modelValue"],q=["for"],G={class:"relative"},J=["src"],K={class:"min-h-28 ml-4 flex flex-col justify-evenly flex-1"},Q={key:0,class:"text-base font-bold text-slate-800"},W={key:1,class:"text-base font-bold text-slate-800"},X={class:"text-sm text-slate-700"},Y={class:"text-sm text-slate-500"},Z={key:2,class:"flex bg-gradient-to-r from-slate-600 to-slate-700 justify-center items-center rounded-full px-4 py-1 text-white w-fit"},$=t("img",{src:"/images/icon_cash.png",class:"h-4 mr-1"},null,-1),tt={class:"text-xs text-slate-400"},et={class:"sticky bottom-16 md:bottom-20 bg-white py-6 space-y-4 mt-8 border-t border-slate-200 -mx-3 md:-mx-4"},st={class:"text-center"},ot={class:"flex items-center cursor-pointer justify-center"},it=t("span",{class:"ml-2 font-bold text-slate-600"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),lt={class:"text-center text-slate-600 flex justify-center items-center gap-4 text-sm"},rt=["disabled"],nt=["disabled"],dt={key:1,class:"p-4 md:p-6"},at=t("h2",{class:"my-2 text-base md:text-lg font-bold text-slate-800"},"\u914D\u9001\u5185\u5BB9\u306E\u78BA\u8A8D",-1),ct={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6 space-y-4"},ht={class:"flex items-center justify-between"},ut={class:"text-sm font-medium text-slate-700"},mt=t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1),_t=[mt],ft={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pt={key:0,class:"flex items-center p-4 bg-slate-50 rounded-xl"},xt=["src"],bt={class:"ml-4 flex-1"},vt={class:"text-sm font-bold text-slate-800"},gt={class:"text-sm font-medium text-slate-800"},yt={class:"text-sm text-slate-500"},kt={class:"text-sm text-slate-600"},wt={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6"},Ct=t("div",{class:"mb-4 text-sm font-medium text-slate-700"},"\u914D\u9001\u5148\u60C5\u5831",-1),jt={class:"flex items-center justify-between"},Pt={class:"flex-1 space-y-1"},Lt={class:"text-sm text-slate-600"},At={class:"text-sm text-slate-600"},Ht={class:"text-sm text-slate-600"},Bt={class:"font-medium text-slate-800"},Et={class:"flex justify-center gap-4"},Vt={key:2,class:"max-w-2xl mx-auto p-6"},Ot=t("h2",{class:"mb-6 text-base md:text-lg text-center font-bold text-slate-800"},"\u914D\u9001\u624B\u7D9A\u304D\u5B8C\u4E86",-1),Tt={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6"},Ft={class:"text-center text-slate-600 mb-4"},Nt=t("br",null,null,-1),St=t("br",null,null,-1),It=t("span",{class:"font-bold"},"\u6570\u65E5~\u6570\u9031\u9593",-1),Ut=t("br",null,null,-1),Dt={class:"flex justify-center gap-4"};function Mt(o,s,l,n,i,c){const j=_("Head"),P=_("ProductHeader"),L=_("ProductTabBar"),g=_("Link"),A=_("AppLayout");return d(),a(f,null,[u(j,{title:"\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7"}),u(A,null,{default:x(()=>[u(P,{title:"\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7",class:"mt-3"}),i.ready_delivery==0?(d(),a("div",D,[u(L,{tabs:i.main_tab},null,8,["tabs"]),t("div",M,[(d(!0),a(f,null,k(l.products.data,(e,H)=>(d(),a("div",z,[t("div",{class:p(["flex items-start w-full p-3 md:p-4 gap-2",{"bg-slate-50":n.form.checks["id"+e.id]}])},[b(t("input",{id:"checkbox"+e.id,"onUpdate:modelValue":y=>n.form.checks["id"+e.id]=y,type:"checkbox",onChange:s[0]||(s[0]=y=>c.changeCheck()),class:"cursor-pointer rounded border-slate-300 text-slate-600 shadow-sm focus:ring-0 m-1"},null,40,R),[[w,n.form.checks["id"+e.id]]]),t("label",{for:"checkbox"+e.id,class:"flex-1 cursor-pointer flex items-center text-sm"},[t("div",G,[t("img",{src:e.image,class:"h-28 object-contain"},null,8,J)]),t("div",K,[e.gacha_title?(d(),a("div",Q,r(e.gacha_title),1)):h("",!0),e.gacha_id==0?(d(),a("div",W,"RP\u30D7\u30ED\u30C0\u30AF\u30C8")):h("",!0),t("div",X,r(e.name),1),t("div",Y,r(e.rare),1),e.is_lost_product!=2?(d(),a("div",Z,[$,t("span",null,r(e.point.toLocaleString())+"\xA0PT",1)])):h("",!0),t("div",tt,"\u4FDD\u6709\u671F\u9650: "+r(e.expiration),1)])],8,q)],2)]))),256))]),t("div",et,[t("div",st,[t("label",ot,[b(t("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=e=>i.isCheckAll=e),onChange:s[2]||(s[2]=e=>c.checkall()),class:"h-5 w-5 cursor-pointer rounded border-slate-300 text-slate-600 focus:ring-0"},null,544),[[w,i.isCheckAll]]),it])]),t("div",lt,[t("button",{type:"button",onClick:s[3]||(s[3]=e=>c.submit("point")),class:p([{"opacity-50":n.form.processing||!i.hasCheck},"w-40 md:w-60 inline-flex items-center justify-center px-4 py-3 rounded-xl font-semibold text-sm text-neutral-700 bg-yellow-300 hover:bg-yellow-400 transition-all duration-200"]),disabled:n.form.processing||!i.hasCheck}," \u30DD\u30A4\u30F3\u30C8\u306B\u63DB\u3048\u308B ",10,rt),t("button",{type:"button",onClick:s[4]||(s[4]=e=>c.submit("delivery")),class:p([{"opacity-50":n.form.processing||!i.hasCheck},"w-40 md:w-60 inline-flex items-center justify-center px-4 py-3 rounded-xl font-semibold text-sm text-white bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 transition-all duration-200 shadow-sm hover:shadow-md"]),disabled:n.form.processing||!i.hasCheck}," \u767A\u9001\u3059\u308B ",10,nt)])])])):h("",!0),i.ready_delivery==1?(d(),a("div",dt,[at,t("div",ct,[t("div",ht,[t("div",ut,"\u914D\u9001\u5546\u54C1 \uFF08\u8A08"+r(i.products_count)+"\u70B9\uFF09",1),t("button",{onClick:s[5]||(s[5]=(...e)=>c.toggleProductList&&c.toggleProductList(...e)),class:"text-sm text-slate-600 hover:text-slate-800 flex items-center gap-1"},[t("span",null,r(i.isProductListExpanded?"\u9589\u3058\u308B":"\u5C55\u958B\u3059\u308B"),1),(d(),a("svg",{xmlns:"http://www.w3.org/2000/svg",class:p(["h-4 w-4 transition-transform",{"rotate-180":i.isProductListExpanded}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_t,2))])]),b(t("div",ft,[(d(!0),a(f,null,k(l.products.data,(e,H)=>(d(),a(f,null,[n.form.checks["id"+e.id]?(d(),a("div",pt,[t("img",{src:e.image,class:"h-20 w-20 object-contain"},null,8,xt),t("div",bt,[t("div",vt,r(e.gacha_title),1),t("div",gt,r(e.name),1),t("div",yt,r(e.rare),1),t("div",kt,r(e.point)+"pt",1)])])):h("",!0)],64))),256))],512),[[O,i.isProductListExpanded]])]),t("div",wt,[Ct,t("div",jt,[t("div",Pt,[l.profile.id?(d(),a(f,{key:0},[t("p",Lt,"\u3012"+r(l.profile.postal_code),1),t("p",At,r(l.profile.city)+r(l.profile.street),1),t("p",Ht,r(l.profile.building),1),t("p",Bt,r(l.profile.first_name+l.profile.last_name),1)],64)):h("",!0)]),t("div",null,[u(g,{href:o.route("user.address"),type:"button",onClick:s[6]||(s[6]=e=>c.back_delivery()),class:"inline-flex items-center px-4 py-2 rounded-lg font-medium text-sm text-slate-600 bg-slate-50 hover:bg-slate-100 transition-colors"},{default:x(()=>[m(" \u7DE8\u96C6 ")]),_:1},8,["href"])])])]),t("div",Et,[t("button",{type:"button",onClick:s[7]||(s[7]=e=>c.back_delivery()),class:"w-32 inline-flex items-center justify-center px-4 py-3 rounded-xl font-medium text-sm text-slate-700 bg-slate-100 hover:bg-slate-200 transition-colors"}," \u623B\u308B "),t("button",{type:"button",onClick:s[8]||(s[8]=e=>c.submit_delivery()),class:"w-32 inline-flex items-center justify-center px-4 py-3 rounded-xl font-medium text-sm text-white bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 transition-all duration-200 shadow-sm hover:shadow-md"}," \u767A\u9001\u3059\u308B ")])])):h("",!0),i.ready_delivery==2?(d(),a("div",Vt,[Ot,t("div",Tt,[t("div",Ft,[m(" \u8A08"+r(i.products_count)+"\u70B9\u306E\u5546\u54C1\u306E\u914D\u9001\u624B\u7D9A\u304D\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002",1),Nt,St,m(" \u5546\u54C1\u306E\u767A\u9001\u306B\u306F"),It,m("\u304B\u304B\u308B\u53EF\u80FD\u6027\u304C\u3054\u3056\u3044\u307E\u3059\u3002"),Ut,m(" \u3054\u4E86\u627F\u306E\u307B\u3069\u3088\u308D\u3057\u304F\u304A\u9858\u3044\u81F4\u3057\u307E\u3059\u3002 ")])]),t("div",Dt,[u(g,{href:o.route("main"),class:"w-48 inline-flex items-center justify-center px-4 py-3 rounded-xl font-medium text-sm text-white bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 transition-all duration-200 shadow-sm hover:shadow-md"},{default:x(()=>[m(" \u30AC\u30C1\u30E3TOP\u3078 ")]),_:1},8,["href"]),t("button",{type:"button",onClick:s[9]||(s[9]=e=>c.back_delivery()),class:"w-48 inline-flex items-center justify-center px-4 py-3 rounded-xl font-medium text-sm text-white bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 transition-all duration-200 shadow-sm hover:shadow-md"}," \u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7\u3078 ")])])):h("",!0)]),_:1})],64)}const Wt=I(U,[["render",Mt]]);export{Wt as default};
