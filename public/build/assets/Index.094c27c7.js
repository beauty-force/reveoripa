import{H as U,d as j,u as V,r as f,o as n,c as a,a as m,w as p,F as g,b as t,l as c,h as L,t as i,f as b,e as M,g as _,v as u}from"./app.2a886391.js";import{A as D}from"./Admin.8a9aa4bd.js";import{N as R,e as H,U as O,o as q,f as B,u as I}from"./useConfirm.d225b68c.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";const{confirm:A}=I(),F={components:{Head:U,AppLayout:D,Dialog:R,DialogPanel:H,DialogTitle:O,TransitionChild:q,TransitionRoot:B},props:{errors:Object,ranks:Object},data(){return{url1:null,url2:null,open:!1}},methods:{destroy_rank(o){A("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F","","error").then(s=>{s&&j.Inertia.delete(route("admin.rank.destroy",{id:o}))})},modalOpen(o){o?(this.form.id=o.id,this.form.rank=o.rank,this.form.title=o.title,this.form.limit=o.limit,this.form.keep_limit=o.keep_limit,this.form.bonus=o.bonus,this.form.pt_rate=o.pt_rate,this.form.dp_rate=o.dp_rate,this.form.badge="",this.url1=o.image,this.url2=o.badge):(this.form.id=0,this.form.rank="",this.form.title="",this.form.limit="",this.form.keep_limit="",this.form.bonus="",this.form.pt_rate=0,this.form.dp_rate=0,this.form.badge="",this.url1="",this.url2=""),this.open=!0},closeModal(){this.open=!1},submit(){this.$refs.photo2.files[0]&&(this.form.badge=this.$refs.photo2.files[0]),this.form.post(route("admin.rank.store"),{preserveScroll:!0,onFinish:()=>{}})},previewImage1(o){const s=o.target.files[0];this.url1=URL.createObjectURL(s)},previewImage2(o){const s=o.target.files[0];this.url2=URL.createObjectURL(s)},pt_rate_string(o){return o.limit<0||o.pt_rate<=0?'<span class="text-[1.2em]">???</span>':`${o.pt_rate}%\u4ED8\u4E0E<br/>(\u8CFC\u5165\u6642PT\u306E)`},format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},bonus_pt_string(o){return o.limit<0||o.pt_rate<=0?'<span class="text-[1.2em]">???</span>':`${this.format_number(o.bonus)}PT`}},setup(o){return{form:V({id:"",rank:"",title:"",limit:"",keep_limit:"",bonus:"",pt_rate:"",dp_rate:"",image:"",badge:""})}},mounted(){}},S={class:"pt-4 px-4 sm:px-5 py-2"},z={class:"flex items-center justify-between mb-6"},E=t("h1",{class:"text-xl sm:text-2xl font-bold text-gray-800"},"\u30E9\u30F3\u30AF\u7279\u5178\u8A2D\u5B9A",-1),G=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),J={class:"space-y-4"},K={class:"p-4 md:flex md:gap-4 space-y-4 md:space-y-0"},Q={class:"flex items-center justify-between md:flex-1"},W={class:"flex items-center gap-8 md:flex-col md:items-start md:gap-4"},X={class:"flex whitespace-nowrap gap-2 items-center"},Y=t("span",{class:"text-gray-600 text-sm"},"\u30E9\u30F3\u30AF",-1),Z={class:"text-lg font-bold text-gray-800"},$={class:"rounded-full text-base font-bold text-rose-600"},tt={class:"flex items-center gap-4 md:flex-1"},et={class:"bg-gradient-to-br from-rose-50 to-rose-100 rounded-xl p-2"},st=["src"],ot={class:"flex-1 space-y-2"},rt={class:"text-sm"},it=t("span",{class:"text-gray-600"},"\u6D88\u8CBB\u57FA\u6E96\u91CF:",-1),nt={class:"font-medium text-gray-800 ml-1"},at={key:0},lt={key:1},dt={class:"text-sm"},ct=t("span",{class:"text-gray-600"},"\u7DAD\u6301\u57FA\u6E96\u91CF:",-1),mt={class:"font-medium text-gray-800 ml-1"},_t={key:0},ut={key:1},ft={class:"text-sm"},pt=t("span",{class:"text-gray-600"},"PT\u4ED8\u4E0E\u7387:",-1),ht={class:"font-medium text-gray-800 ml-1"},xt={key:0},gt={key:1},bt={class:"text-sm"},yt=t("span",{class:"text-gray-600"},"RP\u4ED8\u4E0E\u7387:",-1),vt={class:"font-medium text-gray-800 ml-1"},kt={key:0},wt={key:1},Ct={class:"text-sm"},Tt=t("span",{class:"text-rose-600"},"\u30DC\u30FC\u30CA\u30B9PT:",-1),Pt={class:"font-medium text-rose-700 ml-1"},Ut={key:0},jt={key:1},Vt={class:"flex flex-col items-center gap-4 md:flex-row md:gap-2"},Lt=["onClick"],Mt=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Dt=[Mt],Rt=["onClick"],Ht=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ot=[Ht],qt=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Bt={class:"fixed inset-0 z-20 overflow-y-auto"},It={class:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"},Nt={class:"p-6"},At={class:"text-lg font-semibold text-gray-800 mb-4"},Ft={class:"grid grid-cols-2 gap-4"},St={class:"col-span-1"},zt=t("label",{for:"rank",class:"block text-sm font-medium text-gray-700 mb-1"},[c("\u30E9\u30F3\u30AF"),t("span",{class:"text-rose-500"},"*")],-1),Et={class:"text-rose-500 text-sm mt-1"},Gt={class:"col-span-1"},Jt=t("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-1"},[c("\u30E9\u30F3\u30AF\u540D"),t("span",{class:"text-rose-500"},"*")],-1),Kt={class:"text-rose-500 text-sm mt-1"},Qt={class:"col-span-1"},Wt=t("label",{for:"limit",class:"block text-sm font-medium text-gray-700 mb-1"},[c("\u6D88\u8CBB\u57FA\u6E96\u91CF"),t("span",{class:"text-rose-500"},"*")],-1),Xt={class:"text-rose-500 text-sm mt-1"},Yt={class:"col-span-1"},Zt=t("label",{for:"keep_limit",class:"block text-sm font-medium text-gray-700 mb-1"},"\u7DAD\u6301\u57FA\u6E96\u91CF",-1),$t={class:"text-rose-500 text-sm mt-1"},te={class:"col-span-1"},ee=t("label",{for:"bonus",class:"block text-sm font-medium text-gray-700 mb-1"},[c("\u30DC\u30FC\u30CA\u30B9PT"),t("span",{class:"text-rose-500"},"*")],-1),se={class:"text-rose-500 text-sm mt-1"},oe={class:"col-span-1"},re=t("label",{for:"pt_rate",class:"block text-sm font-medium text-gray-700 mb-1"},[c("PT\u4ED8\u4E0E\u7387 (%)"),t("span",{class:"text-rose-500"},"*")],-1),ie={class:"text-rose-500 text-sm mt-1"},ne={class:"col-span-1"},ae=t("label",{for:"dp_rate",class:"block text-sm font-medium text-gray-700 mb-1"},[c("RP\u4ED8\u4E0E\u7387 (%)"),t("span",{class:"text-rose-500"},"*")],-1),le={class:"text-rose-500 text-sm mt-1"},de={class:"col-span-2"},ce=t("label",{for:"file1-1",class:"block text-sm font-medium text-gray-700 mb-1"},[c("\u30E9\u30F3\u30AF\u30AB\u30FC\u30C9\u753B\u50CF"),t("span",{class:"text-rose-500"},"*")],-1),me={class:"text-center w-full"},_e=["src"],ue={class:"text-rose-500 text-sm mt-1"},fe={class:"mt-6 flex justify-end gap-3"},pe=["disabled"];function he(o,s,l,r,h,d){const y=f("Head"),x=f("TransitionChild"),v=f("DialogPanel"),k=f("Dialog"),w=f("TransitionRoot"),C=f("AppLayout");return n(),a(g,null,[m(y,{title:"\u30E9\u30F3\u30AF\u7279\u5178\u8A2D\u5B9A"}),m(C,{closeModal:d.closeModal},{default:p(()=>[t("div",S,[t("div",z,[E,t("button",{type:"button",onClick:s[0]||(s[0]=e=>d.modalOpen(0)),class:"inline-flex items-center px-4 sm:px-5 py-2 sm:py-2.5 rounded-xl font-semibold text-sm text-white bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 transition-all duration-200 shadow-sm hover:shadow-md"},[G,c(" \u65B0\u898F\u8FFD\u52A0 ")])]),t("div",J,[(n(!0),a(g,null,L(l.ranks,(e,T)=>(n(),a("div",{key:T,class:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100"},[t("div",K,[t("div",Q,[t("div",W,[t("div",X,[Y,c(),t("span",Z,i(e.rank),1)]),t("div",$,i(e.title),1)])]),t("div",tt,[t("div",et,[e.badge?(n(),a("img",{key:0,src:e.badge,class:"h-16 w-16 object-contain"},null,8,st)):b("",!0)]),t("div",ot,[t("div",rt,[it,t("span",nt,[e.limit>0?(n(),a("span",at,i(d.format_number(e.limit))+"PT",1)):(n(),a("span",lt,"\u2014"))])]),t("div",dt,[ct,t("span",mt,[e.keep_limit?(n(),a("span",_t,i(d.format_number(e.keep_limit))+"PT",1)):(n(),a("span",ut,"\u2014"))])]),t("div",ft,[pt,t("span",ht,[e.limit<0?(n(),a("span",xt,"???")):(n(),a("span",gt,i(e.pt_rate)+"%",1))])]),t("div",bt,[yt,t("span",vt,[e.limit<0?(n(),a("span",kt,"???")):(n(),a("span",wt,i(e.dp_rate)+"%",1))])]),t("div",Ct,[Tt,t("span",Pt,[e.limit<0?(n(),a("span",Ut,"???")):(n(),a("span",jt,i(d.format_number(e.bonus))+"PT",1))])])]),t("div",Vt,[t("button",{onClick:P=>d.modalOpen(e),class:"p-1.5 text-gray-600 hover:text-sky-500 hover:bg-sky-50 rounded-lg transition-all duration-200",title:"\u7DE8\u96C6"},Dt,8,Lt),t("button",{onClick:P=>d.destroy_rank(e.id),class:"p-1.5 text-gray-600 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-all duration-200",title:"\u524A\u9664"},Ot,8,Rt)])])])]))),128))])]),t("template",null,[m(w,{as:"template",show:h.open},{default:p(()=>[m(k,{as:"div",class:"relative z-20",onClose:s[11]||(s[11]=e=>h.open=!1)},{default:p(()=>[m(x,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[qt]),_:1}),t("div",Bt,[t("div",It,[m(x,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[m(v,{class:"relative transform overflow-hidden rounded-xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:p(()=>[t("div",Nt,[t("h3",At,i(r.form.id?"\u30E9\u30F3\u30AF\u7DE8\u96C6":"\u65B0\u898F\u30E9\u30F3\u30AF\u8FFD\u52A0"),1),t("form",{onSubmit:s[10]||(s[10]=M(e=>d.submit(),["prevent"]))},[t("div",Ft,[t("div",St,[zt,_(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>r.form.rank=e),id:"rank",type:"number",class:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-rose-200 focus:border-rose-300 transition duration-150",required:""},null,512),[[u,r.form.rank]]),t("div",Et,i(l.errors.rank),1)]),t("div",Gt,[Jt,_(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>r.form.title=e),id:"title",type:"text",class:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-rose-200 focus:border-rose-300 transition duration-150",required:""},null,512),[[u,r.form.title]]),t("div",Kt,i(l.errors.title),1)]),t("div",Qt,[Wt,_(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>r.form.limit=e),id:"limit",type:"number",class:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-rose-200 focus:border-rose-300 transition duration-150",required:""},null,512),[[u,r.form.limit]]),t("div",Xt,i(l.errors.limit),1)]),t("div",Yt,[Zt,_(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>r.form.keep_limit=e),id:"keep_limit",type:"number",class:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-rose-200 focus:border-rose-300 transition duration-150"},null,512),[[u,r.form.keep_limit]]),t("div",$t,i(l.errors.keep_limit),1)]),t("div",te,[ee,_(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>r.form.bonus=e),id:"bonus",type:"number",class:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-rose-200 focus:border-rose-300 transition duration-150",required:""},null,512),[[u,r.form.bonus]]),t("div",se,i(l.errors.bonus),1)]),t("div",oe,[re,_(t("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>r.form.pt_rate=e),id:"pt_rate",type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-rose-200 focus:border-rose-300 transition duration-150",required:""},null,512),[[u,r.form.pt_rate]]),t("div",ie,i(l.errors.pt_rate),1)]),t("div",ne,[ae,_(t("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>r.form.dp_rate=e),id:"dp_rate",type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-rose-200 focus:border-rose-300 transition duration-150",required:""},null,512),[[u,r.form.dp_rate]]),t("div",le,i(l.errors.dp_rate),1)]),t("div",de,[ce,t("div",me,[h.url2?(n(),a("img",{key:0,src:h.url2,class:"inline-block h-24"},null,8,_e)):b("",!0)]),t("input",{onChange:s[8]||(s[8]=(...e)=>d.previewImage2&&d.previewImage2(...e)),ref:"photo2",id:"file1-1",type:"file",accept:"image/*",class:"w-full"},null,544),t("div",ue,i(l.errors.badge),1)])]),t("div",fe,[t("button",{type:"button",onClick:s[9]||(s[9]=e=>h.open=!1),class:"px-4 py-2 rounded-lg font-medium text-sm text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors"}," \u30AD\u30E3\u30F3\u30BB\u30EB "),t("button",{type:"submit",disabled:r.form.processing,class:"px-4 py-2 rounded-lg font-medium text-sm text-white bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50"}," \u4FDD\u5B58 ",8,pe)])],32)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1},8,["closeModal"])],64)}const ve=N(F,[["render",he]]);export{ve as default};
