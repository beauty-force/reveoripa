import{H as j,L as I,r as m,o as e,c as s,a as h,w as x,F as d,b as t,f as l,h as g,t as u,n as M,_ as B,K as D,M as S}from"./app.d60d641b.js";import{A as T}from"./Admin.88c69b71.js";import{F as A,f as G,o as L,N,V as O,r as V}from"./useConfirm.598982b4.js";import{G as z}from"./GachaButtons.58af859b.js";import{P as F}from"./Pagination.a2aaaa1a.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as P}from"./ExclamationTriangleIcon.cb2d13c1.js";import"./PlayIcon.973cf5c3.js";import"./ChevronRightIcon.6822ddfe.js";import"./EllipsisHorizontalIcon.24dd0db9.js";const R={components:{Head:j,AppLayout:T,Footer:A,Link:I,GachaButtons:z,Pagination:F,TransitionRoot:G,TransitionChild:L,Dialog:N,DialogOverlay:O,XMarkIcon:V,ExclamationTriangleIcon:P},props:{errors:Object,gacha:Object,category_share:Object,gacha_log:Array,is_admin:Boolean,search_cond:Object,total:Number,code:String},data(){return{products:[this.gacha.products.filter(a=>a.rank==1),this.gacha.products.filter(a=>a.rank==2),this.gacha.products.filter(a=>a.rank==3),this.gacha.products.filter(a=>a.rank==4)],last_product:this.gacha.products.filter(a=>a.is_last==1),isDialogMessage:!1,dialogMessage:"",image:""}},methods:{format_number(a){return String(a).replace(/(.)(?=(\d{3})+$)/g,"$1,")},openImage(a){this.image=a,this.isDialogMessage=!0}},computed:{progress_width(){return this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card)+"%":"100%"},progress_color(){let a=this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card):100;return a>=50?"bg-green-500":a>=20?"bg-yellow-500":"bg-rose-500"}}},i=a=>(D("data-v-cbd2f7a5"),a=a(),S(),a),E={key:0,class:"w-full min-h-full flex flex-col"},K={class:"md:w-[680px] w-full mx-auto bg-white flex-1"},X={class:"mx-auto relative"},q=["src"],J=["src"],Q={class:"flex justify-center items-center flex-col w-full mx-auto px-2 font-[mplus2] py-6"},U={key:0,src:"/images/Scard.png",class:"h-16"},W={key:1,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},Y=["onClick"],Z=["src"],$={key:2,src:"/images/Acard.png",class:"h-16"},tt={key:3,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},et=["onClick"],st=["src"],ot={key:4,src:"/images/Bcard.png",class:"h-16"},at={key:5,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},ct=["onClick"],nt=["src"],lt={key:6,src:"/images/Ccard.png",class:"h-16"},it={key:7,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},rt=["onClick"],_t=["src"],dt=["src","alt"],ut={key:1,src:"/images/shipping_only.png",class:"absolute bottom-1.5 left-1.5 w-11 md:w-12"},ht={key:8,class:"text-xl font-bold text-purple-500 stroke-text"},mt={key:9,class:"flex flex-wrap justify-center w-full my-4"},gt=["onClick"],ft=["src"],pt=i(()=>t("span",{class:"mt-8 mb-4 text-xl font-bold"},"\u305D\u306E\u4ED6",-1)),xt=i(()=>t("span",{class:"mb-4"},"\u30FB\u305D\u306E\u4ED6\u30AB\u30FC\u30C9\u3042\u308A",-1)),yt={class:"sticky bottom-0 bg-white backdrop-blur-sm"},wt={class:"w-full md:max-w-md mx-auto flex flex-col justify-center flex-1 max-h-20"},bt={class:"font-[mplus2]"},vt={class:"flex justify-between items-end py-1.5 w-full"},kt={class:"flex items-end gap-1.5 w-[45%] px-3"},Ct=i(()=>t("img",{src:"/images/icon_cash.png",class:"h-5 mb-1"},null,-1)),jt={class:"text-base md:text-xl font-bold"},It=i(()=>t("span",{class:"text-xs pb-0.5 text-nowrap"},"/1\u56DE",-1)),Mt={class:"flex-1 flex flex-col items-end gap-1.5 pr-2"},Bt={key:0,class:"text-xs pr-1"},Dt={key:1,class:"flex items-center"},St=i(()=>t("span",{class:"font-semibold pr-2"},"- / -",-1)),Tt=[St],At={class:"w-full px-2 pb-1"},Gt={class:"w-full h-2 rounded-full overflow-hidden flex bg-neutral-300/50"},Lt={class:"px-1 py-1 flex items-end"},Nt={key:1,class:"w-full"},Ot={class:"flex flex-wrap justify-between items-center px-4 py-3 sticky top-[79px] bg-white"},Vt=i(()=>t("h3",{class:"underline underline-offset-4 text-lg"},"\u6392\u51FA\u5C65\u6B74",-1)),zt={class:"overflow-auto px-1"},Ft={class:"min-w-full"},Ht={class:"border-b border-collapse text-nowrap"},Pt=i(()=>t("th",{class:"text-center py-2 px-2"},"\u756A\u53F7",-1)),Rt=i(()=>t("th",{class:"text-center py-2 px-2"},"\u540D\u524D",-1)),Et=i(()=>t("th",{class:"text-center py-2 px-2"},"\u753B\u50CF",-1)),Kt=i(()=>t("th",{class:"text-center py-2 px-2"},"\u30EC\u30A2\u5EA6",-1)),Xt=i(()=>t("th",{class:"text-center py-2 px-2"},"\u30DD\u30A4\u30F3\u30C8",-1)),qt=i(()=>t("th",{class:"text-center py-2 px-2"},"\u30E6\u30FC\u30B6\u30FC",-1)),Jt=i(()=>t("th",{class:"text-center py-2 px-2"},"\u6642\u9593",-1)),Qt={class:"border-b border-collapse text-sm"},Ut={class:"text-center py-2 px-2"},Wt={class:"text-center py-2 px-2"},Yt={class:"text-center py-1 px-2 flex justify-center min-w-20 items-center"},Zt=["src"],$t={class:"text-center py-2 px-2"},te={class:"text-center py-2 px-2"},ee={class:"text-center py-2 px-2"},se={class:"text-center py-2 px-2"},oe=["src"];function ae(a,f,n,ce,c,r){const w=m("Head"),b=m("GachaButtons"),v=m("Pagination"),y=m("TransitionChild"),k=m("TransitionRoot"),C=m("AppLayout");return e(),s(d,null,[h(w,{title:"\u30AC\u30C1\u30E3"}),h(C,null,{default:x(()=>[n.gacha_log.length==0?(e(),s("div",E,[t("div",K,[t("div",X,[n.gacha.image!=""?(e(),s("img",{key:0,src:n.gacha.image,class:"block w-full"},null,8,q)):l("",!0),n.gacha.image==""?(e(),s("img",{key:1,src:n.gacha.thumbnail,class:"block w-full md:w-4/5 mx-auto"},null,8,J)):l("",!0),t("div",Q,[c.products[0].length>0?(e(),s("img",U)):l("",!0),c.products[0].length>0?(e(),s("div",W,[(e(!0),s(d,null,g(c.products[0],(o,_)=>(e(),s("button",{key:_,onClick:p=>r.openImage(o.image),class:"w-1/2 md:w-1/3 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,Z)],8,Y))),128))])):l("",!0),c.products[1].length>0?(e(),s("img",$)):l("",!0),c.products[1].length>0?(e(),s("div",tt,[(e(!0),s(d,null,g(c.products[1],(o,_)=>(e(),s("button",{key:_,onClick:p=>r.openImage(o.image),class:"w-1/3 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,st)],8,et))),128))])):l("",!0),c.products[2].length>0?(e(),s("img",ot)):l("",!0),c.products[2].length>0?(e(),s("div",at,[(e(!0),s(d,null,g(c.products[2],(o,_)=>(e(),s("button",{key:_,onClick:p=>r.openImage(o.image),class:"w-1/4 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,nt)],8,ct))),128))])):l("",!0),c.products[3].length>0?(e(),s("img",lt)):l("",!0),c.products[3].length>0?(e(),s("div",it,[(e(!0),s(d,null,g(c.products[3],(o,_)=>(e(),s("button",{key:_,onClick:p=>r.openImage(o.image),class:"w-1/4 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,_t),o.badge?(e(),s("img",{key:0,src:o.badge,class:"absolute top-2.5 right-2.5 w-10 md:w-11",alt:o.badge},null,8,dt)):l("",!0),o.lost_type=="1"?(e(),s("img",ut)):l("",!0)],8,rt))),128))])):l("",!0),c.last_product.length>0?(e(),s("span",ht,"( \u30E9\u30B9\u30C8\u30EF\u30F3\u8CDE )")):l("",!0),c.last_product.length>0?(e(),s("div",mt,[(e(!0),s(d,null,g(c.last_product,(o,_)=>(e(),s("button",{key:_,onClick:p=>r.openImage(o.image),class:"w-1/3 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,ft)],8,gt))),128))])):l("",!0),pt,xt])])]),t("div",yt,[t("div",wt,[t("div",bt,[t("div",vt,[t("div",kt,[Ct,t("span",jt,u(r.format_number(n.gacha.point)),1),It]),t("div",Mt,[n.gacha.count_card>0?(e(),s("span",Bt," \u306E\u3053\u308A "+u(r.format_number(n.gacha.count_rest))+" / "+u(r.format_number(n.gacha.count_card)),1)):(e(),s("div",Dt,Tt))])]),t("div",At,[t("div",Gt,[t("div",{class:M(`h-full rounded-full border-neutral-800 transition-all duration-500 ${r.progress_color}`),style:B({width:r.progress_width})},null,6)])])])]),t("div",Lt,[h(b,{gacha:n.gacha},null,8,["gacha"])])])])):(e(),s("div",Nt,[t("div",Ot,[Vt,h(v,{search_cond:{...n.search_cond,id:n.gacha.id},route_name:"user.gacha",total:n.total},null,8,["search_cond","total"])]),t("div",zt,[t("table",Ft,[t("thead",null,[t("tr",Ht,[Pt,Rt,Et,Kt,n.is_admin?(e(),s(d,{key:0},[Xt,qt,Jt],64)):l("",!0)])]),t("tbody",null,[(e(!0),s(d,null,g(n.gacha_log,(o,_)=>(e(),s("tr",Qt,[t("td",Ut,u(o.gacha_record_id),1),t("td",Wt,u(o.name),1),t("td",Yt,[t("img",{class:"w-16",src:o.image},null,8,Zt)]),t("td",$t,u(o.rare),1),n.is_admin?(e(),s(d,{key:0},[t("td",te,u(r.format_number(o.point)),1),t("td",ee,u(o.email),1),t("td",se,u(o.gacha_time),1)],64)):l("",!0)]))),256))])])])])),h(k,{show:c.isDialogMessage,class:"h-full fixed inset-0 z-40 top-0"},{default:x(()=>[h(y,{enter:"transition ease-in-out duration-100 transform","enter-from":"scale-50","enter-to":"scale-100",leave:"transition ease-in-out duration-200 transform","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:x(()=>[t("div",{class:"relative z-20 w-full mx-auto md:w-[768px] h-screen flex items-center",onClick:f[0]||(f[0]=o=>c.isDialogMessage=!1)},[t("img",{src:c.image,class:"mx-auto max-h-[80%] max-w-[80%] w-full object-contain"},null,8,oe)])]),_:1}),h(y,{enter:"transition-opacity ease-linear duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-100","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:x(()=>[t("div",{class:"fixed inset-0 bg-white h-full",onClick:f[1]||(f[1]=o=>c.isDialogMessage=!1)})]),_:1})]),_:1},8,["show"])]),_:1})],64)}const fe=H(R,[["render",ae],["__scopeId","data-v-cbd2f7a5"]]);export{fe as default};
