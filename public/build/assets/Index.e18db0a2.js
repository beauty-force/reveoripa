import{H as V,L as N,u as g,r as f,o as c,c as d,a as x,w as y,F as h,b as e,h as k,k as S,l as _,t as s,n as v,g as m,v as w,f as p,a3 as C}from"./app.e35ea7bc.js";import{A as I}from"./Admin.eac267bf.js";import{P as T}from"./Pagination.3bc5efcf.js";import{a as U,u as H}from"./useConfirm.40cb26cb.js";import{_ as O}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as B}from"./ChevronRightIcon.48ee62f8.js";import{r as D}from"./EllipsisHorizontalIcon.8e462279.js";const{confirm:F}=H(),R={components:{Head:V,AppLayout:I,Link:N,ChevronLeftIcon:U,ChevronRightIcon:B,EllipsisHorizontalIcon:D,Pagination:T},props:{errors:Object,gacha:Object,category_share:Object,products:Object,search_cond:Object,totalProducts:Number,totalPoints:Number,searchProducts:Number,searchPoints:Number},data(){return{hasCheck:!1,main_tab:[{title:"\u767A\u9001\u4F9D\u983C\u4E2D",route_url:route("admin.delivery"),is_active:!0},{title:"\u767A\u9001\u6E08\u307F",route_url:route("admin.delivery.completed"),is_active:!1},{title:"\u53D6\u5F97\u6E08\u307F",route_url:route("admin.delivery.acquired"),is_active:!1}],page_step:0,is_busy:!1,profile:{},user_products:[],user:{},hasCheck:!1,isCheckAll:!1}},setup(r){const o=g(r.search_cond),l=g({user_id:0,checks:{},tracking_number:""}),i=g({checks:{}});return console.log(r.products),{form:l,form_search:o,delivery_products:i}},methods:{changeCheck(){let r,o=!1;for(this.isCheckAll=this.user_products.length>0,r=0;r<this.user_products.length;r++)this.form.checks["id"+this.user_products[r].id]?o=!0:this.isCheckAll=!1;this.hasCheck=o},showProductDetail(r){this.is_busy=!0;const o={user_id:r};axios.post(route("admin.delivery.product_data"),o).then(l=>{if((l.status==201||l.status==200)&&l.data.status){this.profile=l.data.profile,this.user=l.data.user,this.user_products=l.data.products,this.page_step=1,this.form.user_id=this.user.id,this.form.checks={},this.hasCheck=this.isCheckAll=!1;let i;for(i=0;i<this.user_products.length;i++)this.form.checks["id"+this.user_products[i].id]=!1}this.is_busy=!1}).catch(l=>{this.is_busy=!0})},changeUserCheck(r,o){let l=o.target.checked;this.delivery_products.checks["id"+r]=l},backToList(){this.page_step=0},submit(){this.hasCheck&&F("\u9078\u629E\u3057\u305F\u5546\u54C1\u3092\u767A\u9001\u3057\u307E\u3059\u304B?").then(r=>{r&&this.form.post(route("admin.delivery.post"),{onFinish:()=>{this.page_step=0}})})},search(){this.form_search.get(route("admin.delivery"))},checkall(){let r;for(this.hasCheck=!1,r=0;r<this.user_products.length;r++)this.form.checks["id"+this.user_products[r].id]=this.isCheckAll,this.hasCheck=this.isCheckAll}}},z={key:0,class:"pt-2 md:px-6 px-4 mb-6"},E={class:"w-full text-neutral-400 mb-3"},M={class:"mb-2 flex justify-between items-center text-sm"},q=e("br",null,null,-1),G=e("br",null,null,-1),J={class:"flex items-center gap-2 w-full flex-wrap mb-2 py-2 justify-between text-sm"},K={class:"flex items-center gap-2 flex-1"},Q={class:"mb-6 grid grid-cols-1 md:grid-cols-2"},W={key:0,class:"-mx-4 my-2 col-span-1 md:col-span-2"},X=["onClick"],Y={class:"flex-1"},Z={class:"text-sm"},$={class:"flex border-neutral-200 items-center w-full hover:bg-slate-100 py-0.5 px-1 gap-1"},ee={class:"flex items-center gap-1"},te=["src"],se={class:"cursor-pointer min-h-20 flex items-center justify-between flex-1 text-xs py-1 px-2 my-0.5"},oe={class:"text-left"},re={class:"text-red-500"},le={key:1,class:"pt-6 md:px-6 px-4 mb-6"},ne={class:"flex justify-between items-center"},ie=e("h2",{class:"mb-2 text-lg font-bold"},"\u914D\u9001\u5546\u54C1\u8A73\u7D30",-1),ce={class:"text-center"},de={class:"cursor-pointer flex items-center"},ae=e("span",{class:"ml-2"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),ue=e("hr",{class:"mb-3"},null,-1),he={class:"mb-6 grid grid-cols-1 md:grid-cols-2"},_e={class:"flex items-center"},pe=["for"],fe=["src"],me={class:"cursor-pointer h-20 flex items-center justify-between flex-1 text-xs py-1 px-2 my-0.5"},be={class:"text-left"},ge={class:"text-red-500"},xe=["id","onUpdate:modelValue"],ke=e("div",{class:"mb-1 text-base font-semibold"},"\u914D\u9001\u5148\u60C5\u5831",-1),ve=e("hr",{class:"mb-3"},null,-1),ye={class:"w-full mb-6"},we={class:"w-full text-sm"},Ce=e("td",{class:"p-1 w-2/5 font-bold"},"\u30A2\u30C9\u30EC\u30B9",-1),Le={class:"p-1 w-3/5"},Pe=e("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D",-1),je={class:"p-1 w-3/5"},Ae=e("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D(\u30AB\u30CA)",-1),Ve={class:"p-1 w-3/5"},Ne=e("td",{class:"p-1 w-2/5 font-bold"},"\u90F5\u4FBF\u756A\u53F7",-1),Se={class:"p-1 w-3/5"},Ie=e("td",{class:"p-1 w-2/5 font-bold"},"\u90FD\u9053\u5E9C\u770C",-1),Te={class:"p-1 w-3/5"},Ue=e("td",{class:"p-1 w-2/5 font-bold"},"\u4F4F\u6240",-1),He={class:"p-1 w-3/5"},Oe=e("td",{class:"p-1 w-2/5 font-bold"},"\u96FB\u8A71\u756A\u53F7",-1),Be={class:"p-1 w-3/5"},De=e("td",{class:"p-1 w-2/5 font-bold"},"\u8FFD\u8DE1\u756A\u53F7",-1),Fe={class:"p-1 w-3/5"},Re={class:"mb-6 w-full text-center"},ze=["disabled"],Ee=["disabled"];function Me(r,o,l,i,n,a){const L=f("Head"),P=f("Link"),j=f("ChevronRightIcon"),A=f("AppLayout");return c(),d(h,null,[x(L,{title:"\u914D\u9001\u5546\u54C1"}),x(A,null,{default:y(()=>[n.page_step==0?(c(),d("div",z,[e("div",E,[(c(!0),d(h,null,k(n.main_tab,(t,u)=>(c(),S(P,{href:t.route_url,class:v(["inline-block px-4 py-1.5",{"border-b-2 border-red-600 text-red-600":t.is_active}])},{default:y(()=>[_(s(t.title),1)]),_:2},1032,["href","class"]))),256))]),e("div",M,[e("p",null,[_(" \u7DCF\u5546\u54C1\u6570: "+s(l.totalProducts.toLocaleString())+" \u4EF6",1),q,_(" \u7DCF\u30DD\u30A4\u30F3\u30C8: "+s(l.totalPoints.toLocaleString())+" PT ",1)]),e("p",null,[_(" \u691C\u7D22\u5546\u54C1\u6570: "+s(l.searchProducts.toLocaleString())+" \u4EF6",1),G,_(" \u691C\u7D22\u30DD\u30A4\u30F3\u30C8: "+s(l.searchPoints.toLocaleString())+" PT ",1)])]),e("div",J,[e("div",K,[m(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>i.form_search.name=t),type:"text",placeholder:"\u540D\u524D\u3001\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3001\u96FB\u8A71\u756A\u53F7\u3001\u5546\u54C1\u540D",class:"h-9 flex-1 w-0 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300"},null,512),[[w,i.form_search.name]])]),e("button",{type:"button",onClick:o[1]||(o[1]=(...t)=>a.search&&a.search(...t)),class:"rounded-md border bg-neutral-600 text-white px-4 py-2"},"\u691C\u7D22")]),e("div",Q,[(c(!0),d(h,null,k(l.products.data,(t,u)=>(c(),d(h,null,[u>0&&l.products.data[u-1].user_id!=t.user_id?(c(),d("hr",W)):p("",!0),u==0||l.products.data[u-1].user_id!=t.user_id?(c(),d("div",{key:1,class:"flex border-neutral-600 border-l-8 border-b border items-center w-full px-2 py-3 cursor-pointer my-1 -ml-1 hover:bg-slate-100 col-span-1 md:col-span-2 shadow",onClick:b=>a.showProductDetail(t.user_id)},[e("span",Y,s(t.user_name)+" ( "+s(t.email)+" ) "+s(t.address),1),e("button",Z,[x(j,{class:"w-5"})])],8,X)):p("",!0),e("div",$,[e("div",ee,[e("img",{src:t.image,class:"h-20 inline-block object-contain"},null,8,te),e("div",se,[e("div",oe,[e("div",null,s(t.name),1),e("div",null,s(t.gacha_title),1),e("div",null,s(t.rare),1),e("div",re,s(t.point.toLocaleString())+"pt",1),e("div",null,s(t.updated_at),1)])])])])],64))),256))])])):p("",!0),n.page_step==1?(c(),d("div",le,[e("div",ne,[ie,e("div",ce,[e("label",de,[m(e("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=t=>n.isCheckAll=t),onChange:o[3]||(o[3]=t=>a.checkall()),class:"h-5 w-5 rounded border-neutral-300 text-neutral-600 shadow-sm focus:ring-neutral-500"},null,544),[[C,n.isCheckAll]]),ae])])]),ue,e("div",he,[(c(!0),d(h,null,k(n.user_products,(t,u)=>(c(),d("div",_e,[e("label",{for:"checkbox"+t.id,class:"flex border-neutral-200 items-center w-full hover:bg-slate-100 py-0.5"},[e("img",{src:t.image,class:"w-20 h-20 inline-block object-contain"},null,8,fe),e("div",me,[e("div",be,[e("div",null,s(t.name),1),e("div",null,s(t.gacha_title),1),e("div",null,s(t.rare),1),e("div",ge,s(t.point.toLocaleString())+"pt",1),e("div",null,s(t.updated_at),1)])]),m(e("input",{id:"checkbox"+t.id,"onUpdate:modelValue":b=>i.form.checks["id"+t.id]=b,type:"checkbox",onChange:o[4]||(o[4]=b=>a.changeCheck()),class:"cursor-pointer rounded border-neutral-300 text-neutral-600 shadow-sm focus:ring-neutral-500 m-1"},null,40,xe),[[C,i.form.checks["id"+t.id]]])],8,pe)]))),256))]),ke,ve,e("div",ye,[e("table",we,[e("tr",null,[Ce,e("td",Le,s(n.user.email),1)]),n.profile?(c(),d(h,{key:0},[e("tr",null,[Pe,e("td",je,s(n.profile.first_name)+" "+s(n.profile.last_name),1)]),e("tr",null,[Ae,e("td",Ve,s(n.profile.first_name_gana)+"\u3000"+s(n.profile.last_name_gana),1)]),e("tr",null,[Ne,e("td",Se,s(n.profile.postal_code),1)]),e("tr",null,[Ie,e("td",Te,s(n.profile.prefecture),1)]),e("tr",null,[Ue,e("td",He,s(n.profile.city)+s(n.profile.street)+"\u3000"+s(n.profile.building),1)]),e("tr",null,[Oe,e("td",Be,s(n.profile.phone),1)]),e("tr",null,[De,e("td",Fe,[m(e("input",{type:"text",id:"tracking_number","onUpdate:modelValue":o[5]||(o[5]=t=>i.form.tracking_number=t),class:"h-10 rounded-sm w-full px-3 py-1 border border-yellow-300 focus:border-yellow-300 focus:ring focus:ring-yellow-200 focus:ring-opacity-50"},null,512),[[w,i.form.tracking_number]])])])],64)):p("",!0)])]),e("div",Re,[e("button",{type:"button",onClick:o[6]||(o[6]=t=>a.backToList()),class:v([{"opacity-25":i.form.processing},"inline-block items-center px-8 py-2.5 bg-neutral-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 m-1"]),disabled:i.form.processing}," \u30EA\u30B9\u30C8\u3078 ",10,ze),e("button",{type:"button",onClick:o[7]||(o[7]=t=>a.submit()),class:v([{"opacity-25":i.form.processing},"inline-block items-center px-8 py-2.5 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150 m-1"]),disabled:i.form.processing}," \u914D\u9001\u6E08\u307F\u306B\u3059\u308B ",10,Ee)])])):p("",!0)]),_:1})],64)}const Ye=O(R,[["render",Me]]);export{Ye as default};
