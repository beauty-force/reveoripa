import{H as M,L as B,r as m,o as s,c as a,a as _,w,F as u,b as t,f as n,h as g,l as p,t as i,n as D,_ as S,K as T,M as N}from"./app.07d18ef0.js";import{A}from"./Admin.65d7d3fc.js";import{F as G,f as L,o as V,N as O,V as z,r as F}from"./useConfirm.bb13b83e.js";import{G as H}from"./GachaButtons.d69ddc67.js";import{P}from"./Pagination.bc1e83fd.js";import{_ as R}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as X}from"./ExclamationTriangleIcon.bbd29503.js";import"./PlayIcon.608ca5c6.js";import"./ChevronRightIcon.f00afef2.js";import"./EllipsisHorizontalIcon.22c9df81.js";const E={components:{Head:M,AppLayout:A,Footer:G,Link:B,GachaButtons:H,Pagination:P,TransitionRoot:L,TransitionChild:V,Dialog:O,DialogOverlay:z,XMarkIcon:F,ExclamationTriangleIcon:X},props:{errors:Object,gacha:Object,category_share:Object,gacha_log:Array,is_admin:Boolean,search_cond:Object,total:Number,code:String},data(){return{products:[this.gacha.products.filter(o=>o.rank==1),this.gacha.products.filter(o=>o.rank==2),this.gacha.products.filter(o=>o.rank==3),this.gacha.products.filter(o=>o.rank==4)],last_product:this.gacha.products.filter(o=>o.is_last==1),isDialogMessage:!1,dialogMessage:"",image:""}},methods:{format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},openImage(o){this.image=o,this.isDialogMessage=!0}},computed:{progress_width(){return this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card)+"%":"100%"},progress_color(){let o=this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card):100;return o>=50?"bg-green-500":o>=20?"bg-yellow-500":"bg-rose-500"}}},r=o=>(T("data-v-5efc2e64"),o=o(),N(),o),K={key:0,class:"w-full min-h-full flex flex-col"},q={class:"md:w-[680px] w-full mx-auto bg-white flex-1"},J={class:"mx-auto relative"},Q=["src"],U=["src"],W={class:"flex justify-center items-center flex-col w-full mx-auto px-2 font-[mplus2] py-6"},Y={key:0,src:"/images/Scard.png",class:"h-16"},Z={key:1,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},$=["onClick"],tt=["src"],et={key:0,class:"absolute bottom-2 right-2 bg-slate-700 text-sm text-white px-1 py-1 min-w-12 flex justify-center items-start leading-4"},st={key:2,src:"/images/Acard.png",class:"h-16"},at={key:3,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},ot=["onClick"],nt=["src"],lt={key:0,class:"absolute bottom-2 right-2 bg-slate-700 text-sm text-white px-1 py-1 min-w-12 flex justify-center items-start leading-4"},ct={key:4,src:"/images/Bcard.png",class:"h-16"},it={key:5,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},rt=["onClick"],_t=["src"],dt={key:0,class:"absolute bottom-2 right-2 bg-slate-700 text-sm text-white px-1 py-1 min-w-12 flex justify-center items-start leading-4"},ht={key:6,src:"/images/Ccard.png",class:"h-16"},ut={key:7,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},mt=["onClick"],gt=["src"],ft=["src","alt"],pt={key:1,src:"/images/shipping_only.png",class:"absolute bottom-1.5 left-1.5 w-11 md:w-12"},xt={key:2,class:"absolute bottom-2 right-2 bg-slate-700 text-sm text-white px-1 py-1 min-w-12 flex justify-center items-start leading-4"},yt={key:8,class:"text-xl font-bold text-purple-500 stroke-text"},wt={key:9,class:"flex flex-wrap justify-center w-full my-4"},bt=["onClick"],kt=["src"],vt={key:0,class:"absolute bottom-2 right-2 bg-slate-700 text-sm text-white px-1 py-1 min-w-12 flex justify-center items-start leading-4"},jt=r(()=>t("span",{class:"mt-8 mb-4 text-xl font-bold"},"\u305D\u306E\u4ED6",-1)),Ct=r(()=>t("span",{class:"mb-4"},"\u30FB\u305D\u306E\u4ED6\u30AB\u30FC\u30C9\u3042\u308A",-1)),It={class:"sticky bottom-0 bg-white backdrop-blur-sm"},Mt={class:"w-full md:max-w-md mx-auto flex flex-col justify-center flex-1 max-h-20"},Bt={class:"font-[mplus2]"},Dt={class:"flex justify-between items-end py-1.5 w-full"},St={class:"flex items-end gap-1.5 w-[45%] px-3"},Tt=r(()=>t("img",{src:"/images/icon_cash.png",class:"h-5 mb-1"},null,-1)),Nt={class:"text-base md:text-xl font-bold"},At=r(()=>t("span",{class:"text-xs pb-0.5 text-nowrap"},"/1\u56DE",-1)),Gt={class:"flex-1 flex flex-col items-end gap-1.5 pr-2"},Lt={key:0,class:"text-xs pr-1"},Vt={key:1,class:"flex items-center"},Ot=r(()=>t("span",{class:"font-semibold pr-2"},"- / -",-1)),zt=[Ot],Ft={class:"w-full px-2 pb-1"},Ht={class:"w-full h-2 rounded-full overflow-hidden flex bg-neutral-300/50"},Pt={class:"px-1 py-1 flex items-end"},Rt={key:1,class:"w-full"},Xt={class:"flex flex-wrap justify-between items-center px-4 py-3 sticky top-[79px] bg-white"},Et=r(()=>t("h3",{class:"underline underline-offset-4 text-lg"},"\u6392\u51FA\u5C65\u6B74",-1)),Kt={class:"overflow-auto px-1"},qt={class:"min-w-full"},Jt={class:"border-b border-collapse text-nowrap"},Qt=r(()=>t("th",{class:"text-center py-2 px-2"},"\u756A\u53F7",-1)),Ut=r(()=>t("th",{class:"text-center py-2 px-2"},"\u540D\u524D",-1)),Wt=r(()=>t("th",{class:"text-center py-2 px-2"},"\u753B\u50CF",-1)),Yt=r(()=>t("th",{class:"text-center py-2 px-2"},"\u30EC\u30A2\u5EA6",-1)),Zt=r(()=>t("th",{class:"text-center py-2 px-2"},"\u30DD\u30A4\u30F3\u30C8",-1)),$t=r(()=>t("th",{class:"text-center py-2 px-2"},"\u30E6\u30FC\u30B6\u30FC",-1)),te=r(()=>t("th",{class:"text-center py-2 px-2"},"\u6642\u9593",-1)),ee={class:"border-b border-collapse text-sm"},se={class:"text-center py-2 px-2"},ae={class:"text-center py-2 px-2"},oe={class:"text-center py-1 px-2 flex justify-center min-w-20 items-center"},ne=["src"],le={class:"text-center py-2 px-2"},ce={class:"text-center py-2 px-2"},ie={class:"text-center py-2 px-2"},re={class:"text-center py-2 px-2"},_e=["src"];function de(o,x,c,he,l,d){const k=m("Head"),f=m("XMarkIcon"),v=m("GachaButtons"),j=m("Pagination"),b=m("TransitionChild"),C=m("TransitionRoot"),I=m("AppLayout");return s(),a(u,null,[_(k,{title:"\u30AC\u30C1\u30E3"}),_(I,null,{default:w(()=>[c.gacha_log.length==0?(s(),a("div",K,[t("div",q,[t("div",J,[c.gacha.image!=""?(s(),a("img",{key:0,src:c.gacha.image,class:"block w-full"},null,8,Q)):n("",!0),c.gacha.image==""?(s(),a("img",{key:1,src:c.gacha.thumbnail,class:"block w-full md:w-4/5 mx-auto"},null,8,U)):n("",!0),t("div",W,[l.products[0].length>0?(s(),a("img",Y)):n("",!0),l.products[0].length>0?(s(),a("div",Z,[(s(!0),a(u,null,g(l.products[0],(e,h)=>(s(),a("button",{key:h,onClick:y=>d.openImage(e.image),class:"w-1/2 md:w-1/3 p-2 relative"},[t("img",{src:e.image,class:"w-full"},null,8,tt),e.marks>0?(s(),a("span",et,[_(f,{class:"w-4"}),p(" "+i(e.marks),1)])):n("",!0)],8,$))),128))])):n("",!0),l.products[1].length>0?(s(),a("img",st)):n("",!0),l.products[1].length>0?(s(),a("div",at,[(s(!0),a(u,null,g(l.products[1],(e,h)=>(s(),a("button",{key:h,onClick:y=>d.openImage(e.image),class:"w-1/3 p-2 relative"},[t("img",{src:e.image,class:"w-full"},null,8,nt),e.marks>0?(s(),a("span",lt,[_(f,{class:"w-4"}),p(" "+i(e.marks),1)])):n("",!0)],8,ot))),128))])):n("",!0),l.products[2].length>0?(s(),a("img",ct)):n("",!0),l.products[2].length>0?(s(),a("div",it,[(s(!0),a(u,null,g(l.products[2],(e,h)=>(s(),a("button",{key:h,onClick:y=>d.openImage(e.image),class:"w-1/4 p-2 relative"},[t("img",{src:e.image,class:"w-full"},null,8,_t),e.marks>0?(s(),a("span",dt,[_(f,{class:"w-4"}),p(" "+i(e.marks),1)])):n("",!0)],8,rt))),128))])):n("",!0),l.products[3].length>0?(s(),a("img",ht)):n("",!0),l.products[3].length>0?(s(),a("div",ut,[(s(!0),a(u,null,g(l.products[3],(e,h)=>(s(),a("button",{key:h,onClick:y=>d.openImage(e.image),class:"w-1/4 p-2 relative"},[t("img",{src:e.image,class:"w-full"},null,8,gt),e.badge?(s(),a("img",{key:0,src:e.badge,class:"absolute top-2.5 right-2.5 w-10 md:w-11",alt:e.badge},null,8,ft)):n("",!0),e.lost_type=="1"?(s(),a("img",pt)):n("",!0),e.marks>0?(s(),a("span",xt,[_(f,{class:"w-4"}),p(" "+i(e.marks),1)])):n("",!0)],8,mt))),128))])):n("",!0),l.last_product.length>0?(s(),a("span",yt,"( \u30E9\u30B9\u30C8\u30EF\u30F3\u8CDE )")):n("",!0),l.last_product.length>0?(s(),a("div",wt,[(s(!0),a(u,null,g(l.last_product,(e,h)=>(s(),a("button",{key:h,onClick:y=>d.openImage(e.image),class:"w-1/3 p-2 relative"},[t("img",{src:e.image,class:"w-full"},null,8,kt),e.marks>0?(s(),a("span",vt,[_(f,{class:"w-4"}),p(" "+i(e.marks),1)])):n("",!0)],8,bt))),128))])):n("",!0),jt,Ct])])]),t("div",It,[t("div",Mt,[t("div",Bt,[t("div",Dt,[t("div",St,[Tt,t("span",Nt,i(d.format_number(c.gacha.point)),1),At]),t("div",Gt,[c.gacha.count_card>0?(s(),a("span",Lt," \u306E\u3053\u308A "+i(d.format_number(c.gacha.count_rest))+" / "+i(d.format_number(c.gacha.count_card)),1)):(s(),a("div",Vt,zt))])]),t("div",Ft,[t("div",Ht,[t("div",{class:D(`h-full rounded-full border-neutral-800 transition-all duration-500 ${d.progress_color}`),style:S({width:d.progress_width})},null,6)])])])]),t("div",Pt,[_(v,{gacha:c.gacha},null,8,["gacha"])])])])):(s(),a("div",Rt,[t("div",Xt,[Et,_(j,{search_cond:{...c.search_cond,id:c.gacha.id},route_name:"user.gacha",total:c.total},null,8,["search_cond","total"])]),t("div",Kt,[t("table",qt,[t("thead",null,[t("tr",Jt,[Qt,Ut,Wt,Yt,c.is_admin?(s(),a(u,{key:0},[Zt,$t,te],64)):n("",!0)])]),t("tbody",null,[(s(!0),a(u,null,g(c.gacha_log,(e,h)=>(s(),a("tr",ee,[t("td",se,i(e.gacha_record_id),1),t("td",ae,i(e.name),1),t("td",oe,[t("img",{class:"w-16",src:e.image},null,8,ne)]),t("td",le,i(e.rare),1),c.is_admin?(s(),a(u,{key:0},[t("td",ce,i(d.format_number(e.point)),1),t("td",ie,i(e.email),1),t("td",re,i(e.gacha_time),1)],64)):n("",!0)]))),256))])])])])),_(C,{show:l.isDialogMessage,class:"h-full fixed inset-0 z-40 top-0"},{default:w(()=>[_(b,{enter:"transition ease-in-out duration-100 transform","enter-from":"scale-50","enter-to":"scale-100",leave:"transition ease-in-out duration-200 transform","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:w(()=>[t("div",{class:"relative z-20 w-full mx-auto md:w-[768px] h-screen flex items-center",onClick:x[0]||(x[0]=e=>l.isDialogMessage=!1)},[t("img",{src:l.image,class:"mx-auto max-h-[80%] max-w-[80%] w-full object-contain"},null,8,_e)])]),_:1}),_(b,{enter:"transition-opacity ease-linear duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-100","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:w(()=>[t("div",{class:"fixed inset-0 bg-white h-full",onClick:x[1]||(x[1]=e=>l.isDialogMessage=!1)})]),_:1})]),_:1},8,["show"])]),_:1})],64)}const ve=R(E,[["render",de],["__scopeId","data-v-5efc2e64"]]);export{ve as default};
