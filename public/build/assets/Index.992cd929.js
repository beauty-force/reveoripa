import{H as V,L as B,u as O,r as _,o as n,c as d,a as u,w as p,F as f,b as e,h as v,n as x,g as k,a3 as w,f as h,J as c,l as m}from"./app.8eaa9ff9.js";import{A as T}from"./UserLayout.90c0163b.js";import{P as F}from"./ProductTabBar.64b6ffc3.js";import{P as N}from"./PageHeader.ae411fcb.js";import{u as I}from"./useConfirm.90c27dd5.js";import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.43e02ee5.js";const{confirm:C,alert:b}=I(),U={components:{Head:V,AppLayout:T,Link:B,ProductTabBar:F,ProductHeader:N},props:{errors:Object,gacha:Object,category_share:Object,products:Object,profile:Object,delivery_limit:Number},data(){return{hasCheck:!1,main_tab:[{title:"\u672A\u9078\u629E",route_url:route("user.products"),is_active:!0},{title:"\u767A\u9001\u5F85\u3061",route_url:route("user.products.wait"),is_active:!1},{title:"\u767A\u9001\u6E08\u307F",route_url:route("user.products.delivered"),is_active:!1}],ready_delivery:0,products_count:0,isCheckAll:!1,_products:this.products.data.filter(o=>o.status==1)}},setup(o){return{form:O({checks:{}})}},methods:{format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},changeCheck(){let o,s=!1;for(this._products=this.products.data.filter(r=>r.status==1),this.isCheckAll=this._products.length>0,o=0;o<this._products.length;o++)this.form.checks["id"+this._products[o].id]?s=!0:this.isCheckAll=!1;this.hasCheck=s},submit(o){let s,r=0;var l=0;let i=0;for(s=0;s<this._products.length;s++)this.form.checks["id"+this._products[s].id]&&(r++,l=parseInt(l)+parseInt(this._products[s].point),this._products[s].rare=="\u30DD\u30A4\u30F3\u30C8"&&i++);if(o=="point")l>0&&C("\u4EA4\u63DB\u3057\u307E\u3059\u304B\uFF1F \u9078\u629E\u3057\u305F"+r+"\u70B9\u306E\u5546\u54C1\u3092"+this.format_number(l)+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002").then(a=>{a&&this.form.post(route("user.products.point.exchange"),{onFinish:()=>{this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}})});else{if(i>0){b("\u30DD\u30A4\u30F3\u30C8\u306F\u767A\u9001\u3067\u304D\u307E\u305B\u3093");return}if(r>0){if(l<this.delivery_limit){b("\u767A\u9001\u4F9D\u983C\u304C\u3067\u304D\u308B\u6700\u4F4E\u30DD\u30A4\u30F3\u30C8\u306F"+this.format_number(this.delivery_limit)+"pt\u3067\u3059\u3002");return}this.products_count=r,this.ready_delivery=1}}},back_delivery(){this.ready_delivery=0},submit_delivery(){this.profile.address?C(""+this.products_count+"\u70B9\u306E\u5546\u54C1\u3092\u914D\u9001\u3057\u307E\u3059\u304B\uFF1F").then(o=>{o&&this.form.post(route("user.delivery.post"),{onFinish:()=>{this.ready_delivery=2,this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}})}):b("\u5165\u529B\u30A8\u30E9\u30FC\u3001\u914D\u9001\u5148\u60C5\u5831\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002")},checkall(){let o;for(this.hasCheck=!1,o=0;o<this._products.length;o++)this.form.checks["id"+this._products[o].id]=this.isCheckAll,this.hasCheck=this.isCheckAll}}},D={key:0,class:"p-3 md:p-4 w-full"},z={class:"grid md:grid-cols-2 gap-4 mt-6"},E={class:"bg-white rounded-2xl shadow-sm border border-rose-100 hover:shadow-md transition-all duration-200"},J=["id","onUpdate:modelValue"],M=["for"],R={class:"relative"},q=["src"],G=["src","alt"],K={class:"min-h-28 ml-4 flex flex-col justify-evenly flex-1"},Q=["src"],W={key:1,class:"text-base font-bold text-gray-800"},X={key:2,class:"text-base font-bold text-gray-800"},Y={class:"text-sm text-gray-700"},Z={class:"text-sm text-gray-500"},$={key:3,class:"flex bg-gradient-to-r from-rose-500 to-rose-600 justify-center items-center rounded-full px-4 py-1 text-white w-fit"},ee=e("img",{src:"/images/icon_cash.png",class:"h-4 mr-1"},null,-1),te={class:"text-xs text-gray-400"},se={class:"sticky bottom-16 md:bottom-20 bg-white py-6 space-y-4 mt-8 border-t border-rose-100 -mx-3 md:-mx-4"},oe={class:"text-center"},re={class:"flex items-center cursor-pointer justify-center"},ie=e("span",{class:"ml-2 font-bold text-rose-600"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),ne={class:"text-center text-neutral-600 flex justify-center items-center gap-4 text-sm"},de=["disabled"],le=["disabled"],ce={key:1,class:"max-w-2xl mx-auto p-6"},ae=e("h2",{class:"mb-6 text-2xl text-center font-bold text-rose-800"},"\u914D\u9001\u5185\u5BB9\u306E\u78BA\u8A8D",-1),he={class:"bg-white rounded-2xl shadow-sm border border-rose-100 p-6 mb-6"},ue={class:"mb-4 text-sm font-medium text-gray-700"},me={class:"space-y-4"},_e={key:0,class:"flex items-center p-4 bg-rose-50 rounded-xl"},fe=["src"],pe={class:"ml-4 flex-1"},xe={class:"text-sm font-medium text-gray-800"},be={class:"text-sm text-gray-500"},ye={class:"text-sm text-rose-600"},ge={class:"bg-white rounded-2xl shadow-sm border border-rose-100 p-6 mb-6"},ve=e("div",{class:"mb-4 text-sm font-medium text-gray-700"},"\u914D\u9001\u5148\u60C5\u5831",-1),ke={class:"flex items-center justify-between"},we={class:"flex-1"},Ce={class:"font-medium text-gray-800"},je={class:"text-sm text-gray-600"},Ae={class:"text-sm text-gray-600"},Pe={class:"flex justify-center gap-4"},Le={key:2,class:"max-w-2xl mx-auto p-6"},He=e("h2",{class:"mb-6 text-2xl text-center font-bold text-rose-800"},"\u914D\u9001\u624B\u7D9A\u304D\u5B8C\u4E86",-1),Ve={class:"bg-white rounded-2xl shadow-sm border border-rose-100 p-6 mb-6"},Be={class:"text-center text-gray-600 mb-4"},Oe=e("br",null,null,-1),Te=e("br",null,null,-1),Fe=e("span",{class:"font-bold"},"\u6570\u65E5~\u6570\u9031\u9593",-1),Ne=e("br",null,null,-1),Ie={class:"flex justify-center gap-4"};function Se(o,s,r,l,i,a){const j=_("Head"),A=_("ProductHeader"),P=_("ProductTabBar"),y=_("Link"),L=_("AppLayout");return n(),d(f,null,[u(j,{title:"\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7"}),u(L,null,{default:p(()=>[u(A,{title:"\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7",class:"mt-3"}),i.ready_delivery==0?(n(),d("div",D,[u(P,{tabs:i.main_tab},null,8,["tabs"]),e("div",z,[(n(!0),d(f,null,v(r.products.data,(t,H)=>(n(),d("div",E,[e("div",{class:x(["flex items-start w-full p-3 md:p-4 gap-2",{"bg-rose-50":l.form.checks["id"+t.id]}])},[k(e("input",{id:"checkbox"+t.id,"onUpdate:modelValue":g=>l.form.checks["id"+t.id]=g,type:"checkbox",onChange:s[0]||(s[0]=g=>a.changeCheck()),class:"cursor-pointer rounded border-rose-300 text-rose-600 shadow-sm focus:ring-0 m-1"},null,40,J),[[w,l.form.checks["id"+t.id]]]),e("label",{for:"checkbox"+t.id,class:"flex-1 cursor-pointer flex items-center text-sm"},[e("div",R,[e("img",{src:t.image,class:"h-28 object-contain"},null,8,q),t.badge?(n(),d("img",{key:0,src:t.badge,class:"absolute -top-2 -right-2 w-[35%]",alt:t.badge},null,8,G)):h("",!0)]),e("div",K,[t.rank>0?(n(),d("img",{key:0,src:`/images/badge${t.rank}.png`,class:"h-6 w-auto"},null,8,Q)):h("",!0),t.gacha_title?(n(),d("div",W,c(t.gacha_title),1)):h("",!0),t.gacha_id==0?(n(),d("div",X,"RP\u30D7\u30ED\u30C0\u30AF\u30C8")):h("",!0),e("div",Y,c(t.name),1),e("div",Z,c(t.rare),1),t.is_lost_product!=2?(n(),d("div",$,[ee,e("span",null,c(t.point.toLocaleString())+"\xA0PT",1)])):h("",!0),e("div",te,"\u4FDD\u6709\u671F\u9650: "+c(t.expiration),1)])],8,M)],2)]))),256))]),e("div",se,[e("div",oe,[e("label",re,[k(e("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=t=>i.isCheckAll=t),onChange:s[2]||(s[2]=t=>a.checkall()),class:"h-5 w-5 cursor-pointer rounded border-rose-300 text-rose-600 focus:ring-0"},null,544),[[w,i.isCheckAll]]),ie])]),e("div",ne,[e("button",{type:"button",onClick:s[3]||(s[3]=t=>a.submit("point")),class:x([{"opacity-50":l.form.processing||!i.hasCheck},"w-40 md:w-60 inline-flex items-center justify-center px-4 py-3 rounded-xl font-semibold text-sm text-white uppercase tracking-wider bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 transition-all duration-200 shadow-sm hover:shadow-md"]),disabled:l.form.processing||!i.hasCheck}," \u30DD\u30A4\u30F3\u30C8\u306B\u63DB\u3048\u308B ",10,de),e("button",{type:"button",onClick:s[4]||(s[4]=t=>a.submit("delivery")),class:x([{"opacity-50":l.form.processing||!i.hasCheck},"w-40 md:w-60 inline-flex items-center justify-center px-4 py-3 rounded-xl font-semibold text-sm text-white uppercase tracking-wider bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 transition-all duration-200 shadow-sm hover:shadow-md"]),disabled:l.form.processing||!i.hasCheck}," \u767A\u9001\u3059\u308B ",10,le)])])])):h("",!0),i.ready_delivery==1?(n(),d("div",ce,[ae,e("div",he,[e("div",ue,"\u914D\u9001\u5546\u54C1 \uFF08\u8A08"+c(i.products_count)+"\u70B9\uFF09",1),e("div",me,[(n(!0),d(f,null,v(r.products.data,(t,H)=>(n(),d(f,null,[l.form.checks["id"+t.id]?(n(),d("div",_e,[e("img",{src:t.image,class:"h-20 w-20 object-contain"},null,8,fe),e("div",pe,[e("div",xe,c(t.name),1),e("div",be,c(t.rare),1),e("div",ye,c(t.point)+"pt",1)])])):h("",!0)],64))),256))])]),e("div",ge,[ve,e("div",ke,[e("div",we,[r.profile.id?(n(),d(f,{key:0},[e("p",Ce,c(r.profile.first_name+r.profile.last_name),1),e("p",je,"\u3012"+c(r.profile.postal_code),1),e("p",Ae,c(r.profile.address),1)],64)):h("",!0)]),e("div",null,[u(y,{href:o.route("user.address"),type:"button",onClick:s[5]||(s[5]=t=>a.back_delivery()),class:"inline-flex items-center px-4 py-2 rounded-lg font-medium text-sm text-rose-600 bg-rose-50 hover:bg-rose-100 transition-colors"},{default:p(()=>[m(" \u7DE8\u96C6 ")]),_:1},8,["href"])])])]),e("div",Pe,[e("button",{type:"button",onClick:s[6]||(s[6]=t=>a.back_delivery()),class:"w-32 inline-flex items-center justify-center px-4 py-3 rounded-xl font-medium text-sm text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors"}," \u623B\u308B "),e("button",{type:"button",onClick:s[7]||(s[7]=t=>a.submit_delivery()),class:"w-32 inline-flex items-center justify-center px-4 py-3 rounded-xl font-medium text-sm text-white bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 transition-all duration-200 shadow-sm hover:shadow-md"}," \u767A\u9001\u3059\u308B ")])])):h("",!0),i.ready_delivery==2?(n(),d("div",Le,[He,e("div",Ve,[e("div",Be,[m(" \u8A08"+c(i.products_count)+"\u70B9\u306E\u5546\u54C1\u306E\u914D\u9001\u624B\u7D9A\u304D\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002",1),Oe,Te,m(" \u5546\u54C1\u306E\u767A\u9001\u306B\u306F"),Fe,m("\u304B\u304B\u308B\u53EF\u80FD\u6027\u304C\u3054\u3056\u3044\u307E\u3059\u3002"),Ne,m(" \u3054\u4E86\u627F\u306E\u307B\u3069\u3088\u308D\u3057\u304F\u304A\u9858\u3044\u81F4\u3057\u307E\u3059\u3002 ")])]),e("div",Ie,[u(y,{href:o.route("main"),class:"w-48 inline-flex items-center justify-center px-4 py-3 rounded-xl font-medium text-sm text-white bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 transition-all duration-200 shadow-sm hover:shadow-md"},{default:p(()=>[m(" \u30AC\u30C1\u30E3TOP\u3078 ")]),_:1},8,["href"]),e("button",{type:"button",onClick:s[8]||(s[8]=t=>a.back_delivery()),class:"w-48 inline-flex items-center justify-center px-4 py-3 rounded-xl font-medium text-sm text-white bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 transition-all duration-200 shadow-sm hover:shadow-md"}," \u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7\u3078 ")])])):h("",!0)]),_:1})],64)}const qe=S(U,[["render",Se]]);export{qe as default};
