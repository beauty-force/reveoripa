import{H as j,L as I,r as m,o as s,c as a,a as h,w as x,F as d,b as e,f as c,h as g,t as u,n as M,_ as B,K as D,M as S}from"./app.859a491c.js";import{A as T}from"./Admin.f231b371.js";import{F as A,f as G,o as L,N,V as O,r as V}from"./useConfirm.341a7c72.js";import{G as z}from"./GachaButtons.d3955e88.js";import{P as F}from"./Pagination.ba1d7377.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as P}from"./ExclamationTriangleIcon.28117950.js";import"./PlayIcon.a5e7fb0a.js";import"./ChevronRightIcon.06f7ba94.js";import"./EllipsisHorizontalIcon.ad33e201.js";const R={components:{Head:j,AppLayout:T,Footer:A,Link:I,GachaButtons:z,Pagination:F,TransitionRoot:G,TransitionChild:L,Dialog:N,DialogOverlay:O,XMarkIcon:V,ExclamationTriangleIcon:P},props:{errors:Object,gacha:Object,category_share:Object,gacha_log:Array,is_admin:Boolean,search_cond:Object,total:Number,code:String},data(){return{products:[this.gacha.products.filter(l=>l.rank==1),this.gacha.products.filter(l=>l.rank==2),this.gacha.products.filter(l=>l.rank==3),this.gacha.products.filter(l=>l.rank==4)],last_product:this.gacha.products.filter(l=>l.is_last==1),isDialogMessage:!1,dialogMessage:"",image:""}},methods:{format_number(l){return String(l).replace(/(.)(?=(\d{3})+$)/g,"$1,")},openImage(l){this.image=l,this.isDialogMessage=!0}},computed:{progress_width(){return this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card)+"%":"100%"},progress_color(){let l=this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card):100;return l>=50?"bg-green-500":l>=20?"bg-yellow-500":"bg-rose-500"}}},i=l=>(D("data-v-edc2f324"),l=l(),S(),l),E={key:0,class:"w-full min-h-full flex flex-col"},K={class:"md:w-[680px] w-full mx-auto bg-white flex-1"},X={class:"mx-auto relative"},q=["src"],J=["src"],Q={class:"flex justify-center items-center flex-col w-full mx-auto px-2 font-[mplus2] py-6"},U={key:0,src:"/images/Scard.png",class:"h-16"},W={key:1,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},Y=["onClick"],Z=["src"],$=["src","alt"],ee={key:2,src:"/images/Acard.png",class:"h-16"},te={key:3,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},se=["onClick"],ae=["src"],le=["src","alt"],oe={key:4,src:"/images/Bcard.png",class:"h-16"},ce={key:5,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},ne=["onClick"],ie=["src"],re=["src","alt"],_e={key:6,src:"/images/Ccard.png",class:"h-16"},de={key:7,class:"flex flex-wrap justify-center w-full mt-2 mb-8"},ue=["onClick"],he=["src"],me=["src","alt"],ge={key:8,class:"text-xl font-bold text-purple-500 stroke-text"},fe={key:9,class:"flex flex-wrap justify-center w-full my-4"},pe=["onClick"],xe=["src"],be=["src","alt"],ye=i(()=>e("span",{class:"mt-8 mb-4 text-xl font-bold"},"\u305D\u306E\u4ED6",-1)),we=i(()=>e("span",{class:"mb-4"},"\u30FB\u305D\u306E\u4ED6\u30AB\u30FC\u30C9\u3042\u308A",-1)),ke={class:"sticky bottom-0 bg-white backdrop-blur-sm"},ve={class:"w-full md:max-w-md mx-auto flex flex-col justify-center flex-1 max-h-20"},Ce={class:"font-[mplus2]"},je={class:"flex justify-between items-end py-1.5 w-full"},Ie={class:"flex items-end gap-1.5 w-[45%] px-3"},Me=i(()=>e("img",{src:"/images/icon_cash.png?v=4",class:"h-5 mb-1"},null,-1)),Be={class:"text-base md:text-xl font-bold"},De=i(()=>e("span",{class:"text-xs pb-0.5 text-nowrap"},"/1\u56DE",-1)),Se={class:"flex-1 flex flex-col items-end gap-1.5 pr-2"},Te={key:0,class:"text-xs pr-1"},Ae={key:1,class:"flex items-center"},Ge=i(()=>e("span",{class:"font-semibold pr-2"},"- / -",-1)),Le=[Ge],Ne={class:"w-full px-2 pb-1"},Oe={class:"w-full h-2 rounded-full overflow-hidden flex bg-neutral-300/50"},Ve={class:"px-1 py-1 flex items-end"},ze={key:1,class:"w-full"},Fe={class:"flex flex-wrap justify-between items-center px-4 py-3 sticky top-[79px] bg-white"},He=i(()=>e("h3",{class:"underline underline-offset-4 text-lg"},"\u6392\u51FA\u5C65\u6B74",-1)),Pe={class:"overflow-auto px-1"},Re={class:"min-w-full"},Ee={class:"border-b border-collapse text-nowrap"},Ke=i(()=>e("th",{class:"text-center py-2 px-2"},"\u756A\u53F7",-1)),Xe=i(()=>e("th",{class:"text-center py-2 px-2"},"\u540D\u524D",-1)),qe=i(()=>e("th",{class:"text-center py-2 px-2"},"\u753B\u50CF",-1)),Je=i(()=>e("th",{class:"text-center py-2 px-2"},"\u30EC\u30A2\u5EA6",-1)),Qe=i(()=>e("th",{class:"text-center py-2 px-2"},"\u30DD\u30A4\u30F3\u30C8",-1)),Ue=i(()=>e("th",{class:"text-center py-2 px-2"},"\u30E6\u30FC\u30B6\u30FC",-1)),We=i(()=>e("th",{class:"text-center py-2 px-2"},"\u6642\u9593",-1)),Ye={class:"border-b border-collapse text-sm"},Ze={class:"text-center py-2 px-2"},$e={class:"text-center py-2 px-2"},et={class:"text-center py-1 px-2 flex justify-center min-w-20 items-center"},tt=["src"],st={class:"text-center py-2 px-2"},at={class:"text-center py-2 px-2"},lt={class:"text-center py-2 px-2"},ot={class:"text-center py-2 px-2"},ct=["src"];function nt(l,f,n,it,o,r){const y=m("Head"),w=m("GachaButtons"),k=m("Pagination"),b=m("TransitionChild"),v=m("TransitionRoot"),C=m("AppLayout");return s(),a(d,null,[h(y,{title:"\u30AC\u30C1\u30E3"}),h(C,null,{default:x(()=>[n.gacha_log.length==0?(s(),a("div",E,[e("div",K,[e("div",X,[n.gacha.image!=""?(s(),a("img",{key:0,src:n.gacha.image,class:"block w-full"},null,8,q)):c("",!0),n.gacha.image==""?(s(),a("img",{key:1,src:n.gacha.thumbnail,class:"block w-full md:w-4/5 mx-auto"},null,8,J)):c("",!0),e("div",Q,[o.products[0].length>0?(s(),a("img",U)):c("",!0),o.products[0].length>0?(s(),a("div",W,[(s(!0),a(d,null,g(o.products[0],(t,_)=>(s(),a("button",{key:_,onClick:p=>r.openImage(t.image),class:"w-1/2 md:w-1/3 p-2 relative"},[e("img",{src:t.image,class:"w-full"},null,8,Z),t.badge?(s(),a("img",{key:0,src:t.badge,class:"absolute bottom-4 w-[calc(100%-3rem)] left-6",alt:t.badge},null,8,$)):c("",!0)],8,Y))),128))])):c("",!0),o.products[1].length>0?(s(),a("img",ee)):c("",!0),o.products[1].length>0?(s(),a("div",te,[(s(!0),a(d,null,g(o.products[1],(t,_)=>(s(),a("button",{key:_,onClick:p=>r.openImage(t.image),class:"w-1/3 p-2 relative"},[e("img",{src:t.image,class:"w-full"},null,8,ae),t.badge?(s(),a("img",{key:0,src:t.badge,class:"absolute bottom-4 w-[calc(100%-2rem)] left-4",alt:t.badge},null,8,le)):c("",!0)],8,se))),128))])):c("",!0),o.products[2].length>0?(s(),a("img",oe)):c("",!0),o.products[2].length>0?(s(),a("div",ce,[(s(!0),a(d,null,g(o.products[2],(t,_)=>(s(),a("button",{key:_,onClick:p=>r.openImage(t.image),class:"w-1/4 p-2 relative"},[e("img",{src:t.image,class:"w-full"},null,8,ie),t.badge?(s(),a("img",{key:0,src:t.badge,class:"absolute bottom-3 w-[calc(100%-1rem)] left-2",alt:t.badge},null,8,re)):c("",!0)],8,ne))),128))])):c("",!0),o.products[3].length>0?(s(),a("img",_e)):c("",!0),o.products[3].length>0?(s(),a("div",de,[(s(!0),a(d,null,g(o.products[3],(t,_)=>(s(),a("button",{key:_,onClick:p=>r.openImage(t.image),class:"w-1/4 p-2 relative"},[e("img",{src:t.image,class:"w-full"},null,8,he),t.badge?(s(),a("img",{key:0,src:t.badge,class:"absolute bottom-3 w-[calc(100%-1rem)] left-2",alt:t.badge},null,8,me)):c("",!0)],8,ue))),128))])):c("",!0),o.last_product.length>0?(s(),a("span",ge,"( \u30E9\u30B9\u30C8\u30EF\u30F3\u8CDE )")):c("",!0),o.last_product.length>0?(s(),a("div",fe,[(s(!0),a(d,null,g(o.last_product,(t,_)=>(s(),a("button",{key:_,onClick:p=>r.openImage(t.image),class:"w-1/3 p-2 relative"},[e("img",{src:t.image,class:"w-full"},null,8,xe),t.badge?(s(),a("img",{key:0,src:t.badge,class:"absolute bottom-4 w-[calc(100%-3rem)] left-6",alt:t.badge},null,8,be)):c("",!0)],8,pe))),128))])):c("",!0),ye,we])])]),e("div",ke,[e("div",ve,[e("div",Ce,[e("div",je,[e("div",Ie,[Me,e("span",Be,u(r.format_number(n.gacha.point)),1),De]),e("div",Se,[n.gacha.count_card>0?(s(),a("span",Te," \u306E\u3053\u308A "+u(r.format_number(n.gacha.count_rest))+" / "+u(r.format_number(n.gacha.count_card)),1)):(s(),a("div",Ae,Le))])]),e("div",Ne,[e("div",Oe,[e("div",{class:M(`h-full rounded-full border-neutral-800 transition-all duration-500 ${r.progress_color}`),style:B({width:r.progress_width})},null,6)])])])]),e("div",Ve,[h(w,{gacha:n.gacha},null,8,["gacha"])])])])):(s(),a("div",ze,[e("div",Fe,[He,h(k,{search_cond:{...n.search_cond,id:n.gacha.id},route_name:"user.gacha",total:n.total},null,8,["search_cond","total"])]),e("div",Pe,[e("table",Re,[e("thead",null,[e("tr",Ee,[Ke,Xe,qe,Je,n.is_admin?(s(),a(d,{key:0},[Qe,Ue,We],64)):c("",!0)])]),e("tbody",null,[(s(!0),a(d,null,g(n.gacha_log,(t,_)=>(s(),a("tr",Ye,[e("td",Ze,u(t.gacha_record_id),1),e("td",$e,u(t.name),1),e("td",et,[e("img",{class:"w-16",src:t.image},null,8,tt)]),e("td",st,u(t.rare),1),n.is_admin?(s(),a(d,{key:0},[e("td",at,u(r.format_number(t.point)),1),e("td",lt,u(t.email),1),e("td",ot,u(t.gacha_time),1)],64)):c("",!0)]))),256))])])])])),h(v,{show:o.isDialogMessage,class:"h-full fixed inset-0 z-40 top-0"},{default:x(()=>[h(b,{enter:"transition ease-in-out duration-100 transform","enter-from":"scale-50","enter-to":"scale-100",leave:"transition ease-in-out duration-200 transform","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:x(()=>[e("div",{class:"relative z-20 w-full mx-auto md:w-[768px] h-screen flex items-center",onClick:f[0]||(f[0]=t=>o.isDialogMessage=!1)},[e("img",{src:o.image,class:"mx-auto max-h-[80%] max-w-[80%] w-full object-contain"},null,8,ct)])]),_:1}),h(b,{enter:"transition-opacity ease-linear duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-100","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:x(()=>[e("div",{class:"fixed inset-0 bg-white h-full",onClick:f[1]||(f[1]=t=>o.isDialogMessage=!1)})]),_:1})]),_:1},8,["show"])]),_:1})],64)}const bt=H(R,[["render",nt],["__scopeId","data-v-edc2f324"]]);export{bt as default};
