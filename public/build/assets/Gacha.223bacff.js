import{H as M,L as I,r as h,o as e,c as s,a as r,w as y,F as d,b as t,f as a,h as m,l as g,J as i,n as B,_ as D}from"./app.1e2534e1.js";import{A as T}from"./Admin.eb8626f3.js";import{F as N,f as A,o as L,N as V,V as G,r as O}from"./useConfirm.921b3b1d.js";import{G as S}from"./GachaButtons.5f521241.js";import{P as z}from"./Pagination.ef2a3eac.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as H}from"./ExclamationTriangleIcon.4515c850.js";import"./PlayIcon.74d8b8dc.js";import"./ChevronRightIcon.e85c0caa.js";import"./EllipsisHorizontalIcon.ef82caf5.js";const P={components:{Head:M,AppLayout:T,Footer:N,Link:I,GachaButtons:S,Pagination:z,TransitionRoot:A,TransitionChild:L,Dialog:V,DialogOverlay:G,XMarkIcon:O,ExclamationTriangleIcon:H},props:{errors:Object,gacha:Object,category_share:Object,gacha_log:Array,is_admin:Boolean,search_cond:Object,total:Number,code:String},data(){return{products:[this.gacha.products.filter(l=>l.rank==1),this.gacha.products.filter(l=>l.rank==2),this.gacha.products.filter(l=>l.rank==3),this.gacha.products.filter(l=>l.rank==4)],last_product:this.gacha.products.filter(l=>l.is_last==1),isDialogMessage:!1,dialogMessage:"",image:""}},methods:{format_number(l){return String(l).replace(/(.)(?=(\d{3})+$)/g,"$1,")},openImage(l){this.image=l,this.isDialogMessage=!0}},computed:{progress_width(){return this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card)+"%":"100%"},progress_color(){let l=this.gacha.count_card>0?Math.round(this.gacha.count_rest*100/this.gacha.count_card):100;return l>=50?"bg-green-500":l>=20?"bg-yellow-500":"bg-rose-500"}}},R={key:0,class:"w-full min-h-full flex flex-col"},X={class:"md:w-[680px] w-full mx-auto bg-white flex-1"},E={class:"mx-auto relative"},J=["src"],q=["src"],K={class:"flex justify-center items-center flex-col w-full mx-auto px-2 font-[mplus2] py-6"},Q={key:0,class:"text-3xl font-bold text-rose-500"},U={key:1,class:"flex flex-wrap justify-center w-full my-4"},W=["onClick"],Y=["src"],Z={key:0,class:"absolute bottom-2 right-2 bg-neutral-600 text-white px-2 py-0.5 min-w-16 font-[mplus2] flex justify-center"},$={key:2,class:"text-2xl font-bold text-sky-500"},tt={key:3,class:"flex flex-wrap justify-center w-full my-4"},et=["onClick"],st=["src"],ot={key:0,class:"absolute bottom-2 right-2 bg-neutral-600 text-white px-2 py-0.5 min-w-16 font-[mplus2] flex justify-center"},at={key:4,class:"text-xl font-bold text-yellow-500"},nt={key:5,class:"flex flex-wrap justify-center w-full my-4"},lt=["onClick"],ct=["src"],it={key:0,class:"absolute bottom-2 right-2 bg-neutral-600 text-white px-2 py-0.5 min-w-16 font-[mplus2] flex justify-center"},rt={key:6,class:"text-xl font-bold text-green-500"},_t={key:7,class:"flex flex-wrap justify-center w-full my-4"},ut=["onClick"],dt=["src"],ht=["src","alt"],mt={key:1,src:"/images/shipping_only.png",class:"absolute bottom-1.5 left-1.5 w-11 md:w-12"},ft={key:2,class:"absolute bottom-2 right-2 bg-neutral-600 text-white px-2 py-0.5 min-w-16 font-[mplus2] flex justify-center"},gt={key:8,class:"text-xl font-bold text-purple-500"},xt={key:9,class:"flex flex-wrap justify-center w-full my-4"},pt=["onClick"],yt=["src"],wt={key:0,class:"absolute bottom-2 right-2 bg-neutral-600 text-white px-2 py-0.5 min-w-16 font-[mplus2] flex justify-center"},bt=t("span",{class:"mt-8 mb-4 text-2xl font-bold"},"\u305D\u306E\u4ED6",-1),kt=t("span",{class:"mb-4"},"\u30FB\u305D\u306E\u4ED6\u30AB\u30FC\u30C9\u3042\u308A",-1),vt={class:"sticky bottom-0"},jt={class:"w-full flex flex-col justify-center flex-1 max-h-20"},Ct={class:"font-[mplus2]"},Mt={class:"flex justify-between items-end py-1.5 w-full"},It={class:"flex items-end gap-1.5 w-[45%] px-3"},Bt=t("img",{src:"/images/icon_cash.png",class:"h-5 mb-1"},null,-1),Dt={class:"text-base md:text-xl font-bold"},Tt=t("span",{class:"text-xs pb-0.5 text-nowrap"},"/1\u56DE",-1),Nt={class:"flex-1 flex flex-col items-end gap-1.5 pr-2"},At={key:0,class:"text-xs pr-1"},Lt={key:1,class:"flex items-center"},Vt=t("span",{class:"font-semibold pr-2"},"- / -",-1),Gt=[Vt],Ot={class:"w-full px-2 pb-1"},St={class:"w-full h-2 rounded-full overflow-hidden flex bg-neutral-300/50"},zt={key:0,class:"px-1 py-1 flex items-end"},Ft={key:1,class:"w-full"},Ht={class:"flex flex-wrap justify-between items-center px-4 py-3 sticky top-[79px] bg-white"},Pt=t("h3",{class:"underline underline-offset-4 text-lg"},"\u6392\u51FA\u5C65\u6B74",-1),Rt={class:"overflow-auto px-1"},Xt={class:"min-w-full"},Et={class:"border-b border-collapse text-nowrap"},Jt=t("th",{class:"text-center py-2 px-2"},"\u756A\u53F7",-1),qt=t("th",{class:"text-center py-2 px-2"},"\u540D\u524D",-1),Kt=t("th",{class:"text-center py-2 px-2"},"\u753B\u50CF",-1),Qt=t("th",{class:"text-center py-2 px-2"},"\u30EC\u30A2\u5EA6",-1),Ut=t("th",{class:"text-center py-2 px-2"},"\u30DD\u30A4\u30F3\u30C8",-1),Wt=t("th",{class:"text-center py-2 px-2"},"\u30E6\u30FC\u30B6\u30FC",-1),Yt=t("th",{class:"text-center py-2 px-2"},"\u6642\u9593",-1),Zt={class:"border-b border-collapse text-sm"},$t={class:"text-center py-2 px-2"},te={class:"text-center py-2 px-2"},ee={class:"text-center py-1 px-2 flex justify-center min-w-20 items-center"},se=["src"],oe={class:"text-center py-2 px-2"},ae={class:"text-center py-2 px-2"},ne={class:"text-center py-2 px-2"},le={class:"text-center py-2 px-2"},ce=["src"];function ie(l,x,c,re,n,_){const b=h("Head"),f=h("XMarkIcon"),k=h("GachaButtons"),v=h("Pagination"),w=h("TransitionChild"),j=h("TransitionRoot"),C=h("AppLayout");return e(),s(d,null,[r(b,{title:"\u30AC\u30C1\u30E3"}),r(C,null,{default:y(()=>[c.gacha_log.length==0?(e(),s("div",R,[t("div",X,[t("div",E,[c.gacha.image!=""?(e(),s("img",{key:0,src:c.gacha.image,class:"block w-full"},null,8,J)):a("",!0),c.gacha.image==""?(e(),s("img",{key:1,src:c.gacha.thumbnail,class:"block w-full md:w-4/5 mx-auto"},null,8,q)):a("",!0),t("div",K,[n.products[0].length>0?(e(),s("span",Q,"( S\u8CDE )")):a("",!0),n.products[0].length>0?(e(),s("div",U,[(e(!0),s(d,null,m(n.products[0],(o,u)=>(e(),s("button",{key:u,onClick:p=>_.openImage(o.image),class:"w-1/2 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,Y),o.marks>0?(e(),s("span",Z,[r(f,{class:"w-5"}),g(" "+i(o.marks),1)])):a("",!0)],8,W))),128))])):a("",!0),n.products[1].length>0?(e(),s("span",$,"( A\u8CDE )")):a("",!0),n.products[1].length>0?(e(),s("div",tt,[(e(!0),s(d,null,m(n.products[1],(o,u)=>(e(),s("button",{key:u,onClick:p=>_.openImage(o.image),class:"w-1/3 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,st),o.marks>0?(e(),s("span",ot,[r(f,{class:"w-5"}),g(" "+i(o.marks),1)])):a("",!0)],8,et))),128))])):a("",!0),n.products[2].length>0?(e(),s("span",at,"( B\u8CDE )")):a("",!0),n.products[2].length>0?(e(),s("div",nt,[(e(!0),s(d,null,m(n.products[2],(o,u)=>(e(),s("button",{key:u,onClick:p=>_.openImage(o.image),class:"w-1/4 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,ct),o.marks>0?(e(),s("span",it,[r(f,{class:"w-5"}),g(" "+i(o.marks),1)])):a("",!0)],8,lt))),128))])):a("",!0),n.products[3].length>0?(e(),s("span",rt,"( C\u8CDE )")):a("",!0),n.products[3].length>0?(e(),s("div",_t,[(e(!0),s(d,null,m(n.products[3],(o,u)=>(e(),s("button",{key:u,onClick:p=>_.openImage(o.image),class:"w-1/4 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,dt),o.badge?(e(),s("img",{key:0,src:o.badge,class:"absolute top-2.5 right-2.5 w-10 md:w-11",alt:o.badge},null,8,ht)):a("",!0),o.lost_type=="1"?(e(),s("img",mt)):a("",!0),o.marks>0?(e(),s("span",ft,[r(f,{class:"w-5"}),g(" "+i(o.marks),1)])):a("",!0)],8,ut))),128))])):a("",!0),n.last_product.length>0?(e(),s("span",gt,"( \u30E9\u30B9\u30C8\u30EF\u30F3\u8CDE )")):a("",!0),n.last_product.length>0?(e(),s("div",xt,[(e(!0),s(d,null,m(n.last_product,(o,u)=>(e(),s("button",{key:u,onClick:p=>_.openImage(o.image),class:"w-1/3 p-2 relative"},[t("img",{src:o.image,class:"w-full"},null,8,yt),o.marks>0?(e(),s("span",wt,[r(f,{class:"w-5"}),g(" "+i(o.marks),1)])):a("",!0)],8,pt))),128))])):a("",!0),bt,kt])])]),t("div",vt,[t("div",jt,[t("div",Ct,[t("div",Mt,[t("div",It,[Bt,t("span",Dt,i(_.format_number(c.gacha.point)),1),Tt]),t("div",Nt,[c.gacha.count_card>0?(e(),s("span",At," \u306E\u3053\u308A "+i(_.format_number(c.gacha.count_rest))+" / "+i(_.format_number(c.gacha.count_card)),1)):(e(),s("div",Lt,Gt))])]),t("div",Ot,[t("div",St,[t("div",{class:B(`h-full rounded-full border-neutral-800 transition-all duration-500 ${_.progress_color}`),style:D({width:_.progress_width})},null,6)])])])]),l.url_edit?a("",!0):(e(),s("div",zt,[r(k,{gacha:c.gacha},null,8,["gacha"])]))])])):(e(),s("div",Ft,[t("div",Ht,[Pt,r(v,{search_cond:{...c.search_cond,id:c.gacha.id},route_name:"user.gacha",total:c.total},null,8,["search_cond","total"])]),t("div",Rt,[t("table",Xt,[t("thead",null,[t("tr",Et,[Jt,qt,Kt,Qt,c.is_admin?(e(),s(d,{key:0},[Ut,Wt,Yt],64)):a("",!0)])]),t("tbody",null,[(e(!0),s(d,null,m(c.gacha_log,(o,u)=>(e(),s("tr",Zt,[t("td",$t,i(o.gacha_record_id),1),t("td",te,i(o.name),1),t("td",ee,[t("img",{class:"w-16",src:o.image},null,8,se)]),t("td",oe,i(o.rare),1),c.is_admin?(e(),s(d,{key:0},[t("td",ae,i(_.format_number(o.point)),1),t("td",ne,i(o.email),1),t("td",le,i(o.gacha_time),1)],64)):a("",!0)]))),256))])])])])),r(j,{show:n.isDialogMessage,class:"h-full fixed inset-0 z-40 top-0"},{default:y(()=>[r(w,{enter:"transition ease-in-out duration-100 transform","enter-from":"scale-50","enter-to":"scale-100",leave:"transition ease-in-out duration-200 transform","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:y(()=>[t("div",{class:"relative z-20 w-full mx-auto md:w-[768px] h-screen flex items-center",onClick:x[0]||(x[0]=o=>n.isDialogMessage=!1)},[t("img",{src:n.image,class:"mx-auto max-h-[80%] max-w-[80%] w-full object-contain"},null,8,ce)])]),_:1}),r(w,{enter:"transition-opacity ease-linear duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-100","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:y(()=>[t("div",{class:"fixed inset-0 bg-white h-full",onClick:x[1]||(x[1]=o=>n.isDialogMessage=!1)})]),_:1})]),_:1},8,["show"])]),_:1})],64)}const we=F(P,[["render",ie]]);export{we as default};
